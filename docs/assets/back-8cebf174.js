import{q as u,f as p,_ as v,a as P}from"./index-5c8a367b.js";import{g as _,b as E}from"./back-0e5f36d1.js";const O=({basename:i=""}={})=>{const $=({parents:e,id:a})=>((e?e.join("/")+"/":"")+a).replace(/\./g,"/"),n={pathByData:(e,a,r,t)=>`${i}/static/${e}/${a}/${$(r)}/${t}`,originByData:(e,a,r)=>n.pathByData("origin",e,a,r)};return n},s="/api",D=({localeProvider:{getLocale:i},authProvider:{getToken:$}})=>{const n=(e,a={})=>Promise.all([i(),$()]).then(([r,t])=>({...a,headers:new Headers({Accept:"application/json","Accept-Language":r}),...t?{user:{authenticated:!0,token:`Bearer ${t}`}}:{}})).then(r=>p(e,r));return{getList:(e,{pagination:a,sort:r,filter:t,options:o})=>{const{page:d,perPage:l}=a,{field:c,order:g}=r,y={page:d-1,size:l,sort:`${c},${g}`,...t};return n(`${s}/${e}/search/list?${u.stringify(y)}`,o).then(({json:h})=>({data:h.content||[],total:h.page.totalElements}))},getOne:(e,{id:a,options:r})=>n(`${s}/${e}/${a}`,r).then(({json:t})=>({data:t})),getMany:(e,{ids:a,options:r})=>n(`${s}/${e}/search/findByIdIn?${u.stringify({ids:a})}`,r).then(({json:t})=>({data:t.content||[]})),getManyReference:(e,{pagination:a,sort:r,filter:t,target:o,id:d,options:l})=>{const{page:c,perPage:g}=a,{field:y,order:h}=r,f={sort:JSON.stringify([y,h]),range:JSON.stringify([(c-1)*g,c*g-1]),filter:JSON.stringify({...t,[o]:d})};return n(`${s}/${e}?${u.stringify(f)}`,l).then(({json:m})=>({data:m.content||[],total:m.page.totalElements}))},update:(e,{id:a,data:r,options:t})=>n(`${s}/${e}/${a}`,{method:"PUT",body:JSON.stringify(r),...t}).then(({json:o})=>({data:o})),updateMany:(e,{data:a,options:r})=>Promise.all(a.map(({id:t,...o})=>n(`${s}/${e}/${t}`,{method:"PATCH",body:JSON.stringify(o),...r}))).then(t=>({data:t.map(o=>o.json)})),create:(e,{data:a,options:r})=>n(`${s}/${e}`,{method:"POST",body:JSON.stringify(a),...r}).then(({json:t})=>({data:{...a,id:t.id}})),delete:(e,{id:a,options:r})=>n(`${s}/${e}/${a}`,{method:"DELETE",...r}).then(({json:t})=>({data:t})),deleteMany:(e,{ids:a,options:r})=>Promise.all(a.map(t=>n(`${s}/${e}/${t}`,{method:"DELETE",...r}))).then(t=>({data:t.map(o=>o.json)})),exchange:({path:e,query:a,data:r,options:t})=>n((e.startsWith("/")?e:`${s}/${e}`)+(a?`?${u.stringify(a)}`:""),r?{body:JSON.stringify(r),...t}:t).then(({json:o})=>({data:o}))}},L={getLocaleProvider:_,getFuncProvider:O,getAuthProvider:E,getDataProvider:D},A=i=>{const{getLocaleProvider:$,getFuncProvider:n,getAuthProvider:e,getDataProvider:a}=L,t=$({getLocaleMessages:c=>v(Object.assign({"./messages/en.js":()=>P(()=>import("./en-6aae1503.js"),["assets/en-6aae1503.js","assets/index-5c8a367b.js"]),"./messages/ru.js":()=>P(()=>import("./ru-8654b378.js"),[])}),`./messages/${c}.js`).then(g=>g.default),...i}),o=n(i),d=e(i),l=a({localeProvider:t,authProvider:d,...i});return{localeProvider:t,funcProvider:o,authProvider:d,dataProvider:l}};export{A as default};
