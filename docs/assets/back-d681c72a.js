import{q as c,f as p,_ as u,a as f}from"./index-7add3608.js";import{g as b,a as v,b as E}from"./back-f913a7c1.js";const n="/api",O=({localeProvider:{getLocale:s},authProvider:{getToken:g}})=>{const i=(e,d={})=>Promise.all([s(),g()]).then(([a,t])=>({...d,headers:new Headers({Accept:"application/json","Accept-Language":a}),...t?{user:{authenticated:!0,token:`Bearer ${t}`}}:{}})).then(a=>p(e,a));return{getList:(e,{pagination:d,sort:a,filter:t,options:r})=>{const{page:l,perPage:_}=d,{field:m,order:$}=a,h={page:l-1,size:_,sort:`${m},${$}`,...t};return i(`${n}/${e}/search/list?${c.stringify(h)}`,r).then(({json:o})=>({data:o._embedded?o._embedded[e]:[],total:o.page.totalElements}))},getOne:(e,{id:d,options:a})=>i(`${n}/${e}/${d}`,a).then(({json:t})=>({data:t})),getMany:(e,{ids:d,options:a})=>i(`${n}/${e}/search/findByIdIn?${c.stringify({ids:d})}`,a).then(({json:t})=>({data:t._embedded?t._embedded[e]:[]})),getManyReference:(e,{pagination:d,sort:a,filter:t,target:r,id:l,options:_})=>{const{page:m,perPage:$}=d,{field:h,order:o}=a,P={sort:JSON.stringify([h,o]),range:JSON.stringify([(m-1)*$,m*$-1]),filter:JSON.stringify({...t,[r]:l})};return i(`${n}/${e}?${c.stringify(P)}`,_).then(({json:y})=>({data:y._embedded?y._embedded[e]:[],total:y.page.totalElements}))},update:(e,{id:d,data:a,options:t})=>i(`${n}/${e}/${d}`,{method:"PUT",body:JSON.stringify(a),...t}).then(({json:r})=>({data:r})),updateMany:(e,{data:d,options:a})=>Promise.all(d.map(({id:t,...r})=>i(`${n}/${e}/${t}`,{method:"PATCH",body:JSON.stringify(r),...a}))).then(t=>({data:t.map(r=>r.json)})),create:(e,{data:d,options:a})=>i(`${n}/${e}`,{method:"POST",body:JSON.stringify(d),...a}).then(({json:t})=>({data:{...d,id:t.id}})),delete:(e,{id:d,options:a})=>i(`${n}/${e}/${d}`,{method:"DELETE",...a}).then(({json:t})=>({data:t})),deleteMany:(e,{ids:d,options:a})=>Promise.all(d.map(t=>i(`${n}/${e}/${t}`,{method:"DELETE",...a}))).then(t=>({data:t.map(r=>r.json)})),exchange:({path:e,query:d,data:a,options:t})=>i((e.startsWith("/")?e:`${n}/${e}`)+(d?`?${c.stringify(d)}`:""),a?{body:JSON.stringify(a),...t}:t).then(({json:r})=>({data:r&&r._embedded?r._embedded[e.split("/")[0]]:r}))}},J=s=>{const g=b({i18n:a=>u(Object.assign({"../i18n/messages/en.js":()=>f(()=>import("./en-2f190dbb.js"),["assets/en-2f190dbb.js","assets/index-7add3608.js"]),"../i18n/messages/index.js":()=>f(()=>import("./index-3f09070a.js"),["assets/index-3f09070a.js","assets/en-2f190dbb.js","assets/index-7add3608.js","assets/ru-8654b378.js"]),"../i18n/messages/ru.js":()=>f(()=>import("./ru-8654b378.js"),[])}),`../i18n/messages/${a}.js`),...s}),i=v(s),e=E(),d=O({localeProvider:g,authProvider:e,...s});return{localeProvider:g,funcProvider:i,authProvider:e,dataProvider:d}};export{J as default};
