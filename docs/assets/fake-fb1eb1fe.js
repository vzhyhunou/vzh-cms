import{g as gt,c as mt}from"./index-4215a105.js";var bt={exports:{}};(function(B,N){(function(A,z){B.exports=z()})(mt,function(){return function(){var A={8552:function(n,r,t){var e=t(852)(t(5639),"DataView");n.exports=e},1989:function(n,r,t){var e=t(1789),a=t(401),u=t(7667),i=t(1327),c=t(1866);function p(v){var m=-1,x=v==null?0:v.length;for(this.clear();++m<x;){var _=v[m];this.set(_[0],_[1])}}p.prototype.clear=e,p.prototype.delete=a,p.prototype.get=u,p.prototype.has=i,p.prototype.set=c,n.exports=p},8407:function(n,r,t){var e=t(7040),a=t(4125),u=t(2117),i=t(7518),c=t(4705);function p(v){var m=-1,x=v==null?0:v.length;for(this.clear();++m<x;){var _=v[m];this.set(_[0],_[1])}}p.prototype.clear=e,p.prototype.delete=a,p.prototype.get=u,p.prototype.has=i,p.prototype.set=c,n.exports=p},7071:function(n,r,t){var e=t(852)(t(5639),"Map");n.exports=e},3369:function(n,r,t){var e=t(4785),a=t(1285),u=t(6e3),i=t(9916),c=t(5265);function p(v){var m=-1,x=v==null?0:v.length;for(this.clear();++m<x;){var _=v[m];this.set(_[0],_[1])}}p.prototype.clear=e,p.prototype.delete=a,p.prototype.get=u,p.prototype.has=i,p.prototype.set=c,n.exports=p},3818:function(n,r,t){var e=t(852)(t(5639),"Promise");n.exports=e},8525:function(n,r,t){var e=t(852)(t(5639),"Set");n.exports=e},8668:function(n,r,t){var e=t(3369),a=t(619),u=t(2385);function i(c){var p=-1,v=c==null?0:c.length;for(this.__data__=new e;++p<v;)this.add(c[p])}i.prototype.add=i.prototype.push=a,i.prototype.has=u,n.exports=i},6384:function(n,r,t){var e=t(8407),a=t(7465),u=t(3779),i=t(7599),c=t(4758),p=t(4309);function v(m){var x=this.__data__=new e(m);this.size=x.size}v.prototype.clear=a,v.prototype.delete=u,v.prototype.get=i,v.prototype.has=c,v.prototype.set=p,n.exports=v},2705:function(n,r,t){var e=t(5639).Symbol;n.exports=e},1149:function(n,r,t){var e=t(5639).Uint8Array;n.exports=e},577:function(n,r,t){var e=t(852)(t(5639),"WeakMap");n.exports=e},7412:function(n){n.exports=function(r,t){for(var e=-1,a=r==null?0:r.length;++e<a&&t(r[e],e,r)!==!1;);return r}},4963:function(n){n.exports=function(r,t){for(var e=-1,a=r==null?0:r.length,u=0,i=[];++e<a;){var c=r[e];t(c,e,r)&&(i[u++]=c)}return i}},4636:function(n,r,t){var e=t(2545),a=t(5694),u=t(1469),i=t(4144),c=t(5776),p=t(6719),v=Object.prototype.hasOwnProperty;n.exports=function(m,x){var _=u(m),k=!_&&a(m),I=!_&&!k&&i(m),T=!_&&!k&&!I&&p(m),q=_||k||I||T,U=q?e(m.length,String):[],$=U.length;for(var M in m)!x&&!v.call(m,M)||q&&(M=="length"||I&&(M=="offset"||M=="parent")||T&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||c(M,$))||U.push(M);return U}},9932:function(n){n.exports=function(r,t){for(var e=-1,a=r==null?0:r.length,u=Array(a);++e<a;)u[e]=t(r[e],e,r);return u}},2488:function(n){n.exports=function(r,t){for(var e=-1,a=t.length,u=r.length;++e<a;)r[u+e]=t[e];return r}},2908:function(n){n.exports=function(r,t){for(var e=-1,a=r==null?0:r.length;++e<a;)if(t(r[e],e,r))return!0;return!1}},4865:function(n,r,t){var e=t(9465),a=t(7813),u=Object.prototype.hasOwnProperty;n.exports=function(i,c,p){var v=i[c];u.call(i,c)&&a(v,p)&&(p!==void 0||c in i)||e(i,c,p)}},8470:function(n,r,t){var e=t(7813);n.exports=function(a,u){for(var i=a.length;i--;)if(e(a[i][0],u))return i;return-1}},4037:function(n,r,t){var e=t(8363),a=t(3674);n.exports=function(u,i){return u&&e(i,a(i),u)}},3886:function(n,r,t){var e=t(8363),a=t(1704);n.exports=function(u,i){return u&&e(i,a(i),u)}},9465:function(n,r,t){var e=t(8777);n.exports=function(a,u,i){u=="__proto__"&&e?e(a,u,{configurable:!0,enumerable:!0,value:i,writable:!0}):a[u]=i}},5990:function(n,r,t){var e=t(6384),a=t(7412),u=t(4865),i=t(4037),c=t(3886),p=t(4626),v=t(278),m=t(8805),x=t(1911),_=t(8234),k=t(6904),I=t(4160),T=t(3824),q=t(9148),U=t(8517),$=t(1469),M=t(4144),P=t(6688),G=t(3218),X=t(2928),F=t(3674),H=t(1704),et="[object Arguments]",pt="[object Function]",at="[object Object]",R={};R[et]=R["[object Array]"]=R["[object ArrayBuffer]"]=R["[object DataView]"]=R["[object Boolean]"]=R["[object Date]"]=R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Map]"]=R["[object Number]"]=R[at]=R["[object RegExp]"]=R["[object Set]"]=R["[object String]"]=R["[object Symbol]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R["[object Error]"]=R[pt]=R["[object WeakMap]"]=!1,n.exports=function ft(C,rt,lt,ht,dt,ot){var f,l=1&rt,d=2&rt,o=4&rt;if(lt&&(f=dt?lt(C,ht,dt,ot):lt(C)),f!==void 0)return f;if(!G(C))return C;var s=$(C);if(s){if(f=T(C),!l)return v(C,f)}else{var h=I(C),b=h==pt||h=="[object GeneratorFunction]";if(M(C))return p(C,l);if(h==at||h==et||b&&!dt){if(f=d||b?{}:U(C),!l)return d?x(C,c(f,C)):m(C,i(f,C))}else{if(!R[h])return dt?C:{};f=q(C,h,l)}}ot||(ot=new e);var g=ot.get(C);if(g)return g;ot.set(C,f),X(C)?C.forEach(function(j){f.add(ft(j,rt,lt,j,C,ot))}):P(C)&&C.forEach(function(j,O){f.set(O,ft(j,rt,lt,O,C,ot))});var y=s?void 0:(o?d?k:_:d?H:F)(C);return a(y||C,function(j,O){y&&(j=C[O=j]),u(f,O,ft(j,rt,lt,O,C,ot))}),f}},3118:function(n,r,t){var e=t(3218),a=Object.create,u=function(){function i(){}return function(c){if(!e(c))return{};if(a)return a(c);i.prototype=c;var p=new i;return i.prototype=void 0,p}}();n.exports=u},7786:function(n,r,t){var e=t(1811),a=t(327);n.exports=function(u,i){for(var c=0,p=(i=e(i,u)).length;u!=null&&c<p;)u=u[a(i[c++])];return c&&c==p?u:void 0}},8866:function(n,r,t){var e=t(2488),a=t(1469);n.exports=function(u,i,c){var p=i(u);return a(u)?p:e(p,c(u))}},4239:function(n,r,t){var e=t(2705),a=t(9607),u=t(2333),i=e?e.toStringTag:void 0;n.exports=function(c){return c==null?c===void 0?"[object Undefined]":"[object Null]":i&&i in Object(c)?a(c):u(c)}},9454:function(n,r,t){var e=t(4239),a=t(7005);n.exports=function(u){return a(u)&&e(u)=="[object Arguments]"}},939:function(n,r,t){var e=t(2492),a=t(7005);n.exports=function u(i,c,p,v,m){return i===c||(i==null||c==null||!a(i)&&!a(c)?i!=i&&c!=c:e(i,c,p,v,u,m))}},2492:function(n,r,t){var e=t(6384),a=t(7114),u=t(8351),i=t(6096),c=t(4160),p=t(1469),v=t(4144),m=t(6719),x="[object Arguments]",_="[object Array]",k="[object Object]",I=Object.prototype.hasOwnProperty;n.exports=function(T,q,U,$,M,P){var G=p(T),X=p(q),F=G?_:c(T),H=X?_:c(q),et=(F=F==x?k:F)==k,pt=(H=H==x?k:H)==k,at=F==H;if(at&&v(T)){if(!v(q))return!1;G=!0,et=!1}if(at&&!et)return P||(P=new e),G||m(T)?a(T,q,U,$,M,P):u(T,q,F,U,$,M,P);if(!(1&U)){var R=et&&I.call(T,"__wrapped__"),ft=pt&&I.call(q,"__wrapped__");if(R||ft){var C=R?T.value():T,rt=ft?q.value():q;return P||(P=new e),M(C,rt,U,$,P)}}return!!at&&(P||(P=new e),i(T,q,U,$,M,P))}},5588:function(n,r,t){var e=t(4160),a=t(7005);n.exports=function(u){return a(u)&&e(u)=="[object Map]"}},2958:function(n,r,t){var e=t(6384),a=t(939);n.exports=function(u,i,c,p){var v=c.length,m=v,x=!p;if(u==null)return!m;for(u=Object(u);v--;){var _=c[v];if(x&&_[2]?_[1]!==u[_[0]]:!(_[0]in u))return!1}for(;++v<m;){var k=(_=c[v])[0],I=u[k],T=_[1];if(x&&_[2]){if(I===void 0&&!(k in u))return!1}else{var q=new e;if(p)var U=p(I,T,k,u,i,q);if(!(U===void 0?a(T,I,3,p,q):U))return!1}}return!0}},8458:function(n,r,t){var e=t(3560),a=t(5346),u=t(3218),i=t(346),c=/^\[object .+?Constructor\]$/,p=Function.prototype,v=Object.prototype,m=p.toString,x=v.hasOwnProperty,_=RegExp("^"+m.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(k){return!(!u(k)||a(k))&&(e(k)?_:c).test(i(k))}},9221:function(n,r,t){var e=t(4160),a=t(7005);n.exports=function(u){return a(u)&&e(u)=="[object Set]"}},8749:function(n,r,t){var e=t(4239),a=t(1780),u=t(7005),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,n.exports=function(c){return u(c)&&a(c.length)&&!!i[e(c)]}},280:function(n,r,t){var e=t(5726),a=t(6916),u=Object.prototype.hasOwnProperty;n.exports=function(i){if(!e(i))return a(i);var c=[];for(var p in Object(i))u.call(i,p)&&p!="constructor"&&c.push(p);return c}},313:function(n,r,t){var e=t(3218),a=t(5726),u=t(3498),i=Object.prototype.hasOwnProperty;n.exports=function(c){if(!e(c))return u(c);var p=a(c),v=[];for(var m in c)(m!="constructor"||!p&&i.call(c,m))&&v.push(m);return v}},1573:function(n,r,t){var e=t(2958),a=t(1499),u=t(2634);n.exports=function(i){var c=a(i);return c.length==1&&c[0][2]?u(c[0][0],c[0][1]):function(p){return p===i||e(p,i,c)}}},2545:function(n){n.exports=function(r,t){for(var e=-1,a=Array(r);++e<r;)a[e]=t(e);return a}},531:function(n,r,t){var e=t(2705),a=t(9932),u=t(1469),i=t(3448),c=e?e.prototype:void 0,p=c?c.toString:void 0;n.exports=function v(m){if(typeof m=="string")return m;if(u(m))return a(m,v)+"";if(i(m))return p?p.call(m):"";var x=m+"";return x=="0"&&1/m==-1/0?"-0":x}},1717:function(n){n.exports=function(r){return function(t){return r(t)}}},4757:function(n){n.exports=function(r,t){return r.has(t)}},1811:function(n,r,t){var e=t(1469),a=t(5403),u=t(5514),i=t(9833);n.exports=function(c,p){return e(c)?c:a(c,p)?[c]:u(i(c))}},4318:function(n,r,t){var e=t(1149);n.exports=function(a){var u=new a.constructor(a.byteLength);return new e(u).set(new e(a)),u}},4626:function(n,r,t){n=t.nmd(n);var e=t(5639),a=r&&!r.nodeType&&r,u=a&&n&&!n.nodeType&&n,i=u&&u.exports===a?e.Buffer:void 0,c=i?i.allocUnsafe:void 0;n.exports=function(p,v){if(v)return p.slice();var m=p.length,x=c?c(m):new p.constructor(m);return p.copy(x),x}},7157:function(n,r,t){var e=t(4318);n.exports=function(a,u){var i=u?e(a.buffer):a.buffer;return new a.constructor(i,a.byteOffset,a.byteLength)}},3147:function(n){var r=/\w*$/;n.exports=function(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}},419:function(n,r,t){var e=t(2705),a=e?e.prototype:void 0,u=a?a.valueOf:void 0;n.exports=function(i){return u?Object(u.call(i)):{}}},7133:function(n,r,t){var e=t(4318);n.exports=function(a,u){var i=u?e(a.buffer):a.buffer;return new a.constructor(i,a.byteOffset,a.length)}},278:function(n){n.exports=function(r,t){var e=-1,a=r.length;for(t||(t=Array(a));++e<a;)t[e]=r[e];return t}},8363:function(n,r,t){var e=t(4865),a=t(9465);n.exports=function(u,i,c,p){var v=!c;c||(c={});for(var m=-1,x=i.length;++m<x;){var _=i[m],k=p?p(c[_],u[_],_,c,u):void 0;k===void 0&&(k=u[_]),v?a(c,_,k):e(c,_,k)}return c}},8805:function(n,r,t){var e=t(8363),a=t(9551);n.exports=function(u,i){return e(u,a(u),i)}},1911:function(n,r,t){var e=t(8363),a=t(1442);n.exports=function(u,i){return e(u,a(u),i)}},4429:function(n,r,t){var e=t(5639)["__core-js_shared__"];n.exports=e},8777:function(n,r,t){var e=t(852),a=function(){try{var u=e(Object,"defineProperty");return u({},"",{}),u}catch{}}();n.exports=a},7114:function(n,r,t){var e=t(8668),a=t(2908),u=t(4757);n.exports=function(i,c,p,v,m,x){var _=1&p,k=i.length,I=c.length;if(k!=I&&!(_&&I>k))return!1;var T=x.get(i),q=x.get(c);if(T&&q)return T==c&&q==i;var U=-1,$=!0,M=2&p?new e:void 0;for(x.set(i,c),x.set(c,i);++U<k;){var P=i[U],G=c[U];if(v)var X=_?v(G,P,U,c,i,x):v(P,G,U,i,c,x);if(X!==void 0){if(X)continue;$=!1;break}if(M){if(!a(c,function(F,H){if(!u(M,H)&&(P===F||m(P,F,p,v,x)))return M.push(H)})){$=!1;break}}else if(P!==G&&!m(P,G,p,v,x)){$=!1;break}}return x.delete(i),x.delete(c),$}},8351:function(n,r,t){var e=t(2705),a=t(1149),u=t(7813),i=t(7114),c=t(8776),p=t(1814),v=e?e.prototype:void 0,m=v?v.valueOf:void 0;n.exports=function(x,_,k,I,T,q,U){switch(k){case"[object DataView]":if(x.byteLength!=_.byteLength||x.byteOffset!=_.byteOffset)return!1;x=x.buffer,_=_.buffer;case"[object ArrayBuffer]":return!(x.byteLength!=_.byteLength||!q(new a(x),new a(_)));case"[object Boolean]":case"[object Date]":case"[object Number]":return u(+x,+_);case"[object Error]":return x.name==_.name&&x.message==_.message;case"[object RegExp]":case"[object String]":return x==_+"";case"[object Map]":var $=c;case"[object Set]":var M=1&I;if($||($=p),x.size!=_.size&&!M)return!1;var P=U.get(x);if(P)return P==_;I|=2,U.set(x,_);var G=i($(x),$(_),I,T,q,U);return U.delete(x),G;case"[object Symbol]":if(m)return m.call(x)==m.call(_)}return!1}},6096:function(n,r,t){var e=t(8234),a=Object.prototype.hasOwnProperty;n.exports=function(u,i,c,p,v,m){var x=1&c,_=e(u),k=_.length;if(k!=e(i).length&&!x)return!1;for(var I=k;I--;){var T=_[I];if(!(x?T in i:a.call(i,T)))return!1}var q=m.get(u),U=m.get(i);if(q&&U)return q==i&&U==u;var $=!0;m.set(u,i),m.set(i,u);for(var M=x;++I<k;){var P=u[T=_[I]],G=i[T];if(p)var X=x?p(G,P,T,i,u,m):p(P,G,T,u,i,m);if(!(X===void 0?P===G||v(P,G,c,p,m):X)){$=!1;break}M||(M=T=="constructor")}if($&&!M){var F=u.constructor,H=i.constructor;F==H||!("constructor"in u)||!("constructor"in i)||typeof F=="function"&&F instanceof F&&typeof H=="function"&&H instanceof H||($=!1)}return m.delete(u),m.delete(i),$}},1957:function(n,r,t){var e=typeof t.g=="object"&&t.g&&t.g.Object===Object&&t.g;n.exports=e},8234:function(n,r,t){var e=t(8866),a=t(9551),u=t(3674);n.exports=function(i){return e(i,u,a)}},6904:function(n,r,t){var e=t(8866),a=t(1442),u=t(1704);n.exports=function(i){return e(i,u,a)}},5050:function(n,r,t){var e=t(7019);n.exports=function(a,u){var i=a.__data__;return e(u)?i[typeof u=="string"?"string":"hash"]:i.map}},1499:function(n,r,t){var e=t(9162),a=t(3674);n.exports=function(u){for(var i=a(u),c=i.length;c--;){var p=i[c],v=u[p];i[c]=[p,v,e(v)]}return i}},852:function(n,r,t){var e=t(8458),a=t(7801);n.exports=function(u,i){var c=a(u,i);return e(c)?c:void 0}},5924:function(n,r,t){var e=t(5569)(Object.getPrototypeOf,Object);n.exports=e},9607:function(n,r,t){var e=t(2705),a=Object.prototype,u=a.hasOwnProperty,i=a.toString,c=e?e.toStringTag:void 0;n.exports=function(p){var v=u.call(p,c),m=p[c];try{p[c]=void 0;var x=!0}catch{}var _=i.call(p);return x&&(v?p[c]=m:delete p[c]),_}},9551:function(n,r,t){var e=t(4963),a=t(479),u=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,c=i?function(p){return p==null?[]:(p=Object(p),e(i(p),function(v){return u.call(p,v)}))}:a;n.exports=c},1442:function(n,r,t){var e=t(2488),a=t(5924),u=t(9551),i=t(479),c=Object.getOwnPropertySymbols?function(p){for(var v=[];p;)e(v,u(p)),p=a(p);return v}:i;n.exports=c},4160:function(n,r,t){var e=t(8552),a=t(7071),u=t(3818),i=t(8525),c=t(577),p=t(4239),v=t(346),m="[object Map]",x="[object Promise]",_="[object Set]",k="[object WeakMap]",I="[object DataView]",T=v(e),q=v(a),U=v(u),$=v(i),M=v(c),P=p;(e&&P(new e(new ArrayBuffer(1)))!=I||a&&P(new a)!=m||u&&P(u.resolve())!=x||i&&P(new i)!=_||c&&P(new c)!=k)&&(P=function(G){var X=p(G),F=X=="[object Object]"?G.constructor:void 0,H=F?v(F):"";if(H)switch(H){case T:return I;case q:return m;case U:return x;case $:return _;case M:return k}return X}),n.exports=P},7801:function(n){n.exports=function(r,t){return r==null?void 0:r[t]}},1789:function(n,r,t){var e=t(4536);n.exports=function(){this.__data__=e?e(null):{},this.size=0}},401:function(n){n.exports=function(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}},7667:function(n,r,t){var e=t(4536),a=Object.prototype.hasOwnProperty;n.exports=function(u){var i=this.__data__;if(e){var c=i[u];return c==="__lodash_hash_undefined__"?void 0:c}return a.call(i,u)?i[u]:void 0}},1327:function(n,r,t){var e=t(4536),a=Object.prototype.hasOwnProperty;n.exports=function(u){var i=this.__data__;return e?i[u]!==void 0:a.call(i,u)}},1866:function(n,r,t){var e=t(4536);n.exports=function(a,u){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&u===void 0?"__lodash_hash_undefined__":u,this}},3824:function(n){var r=Object.prototype.hasOwnProperty;n.exports=function(t){var e=t.length,a=new t.constructor(e);return e&&typeof t[0]=="string"&&r.call(t,"index")&&(a.index=t.index,a.input=t.input),a}},9148:function(n,r,t){var e=t(4318),a=t(7157),u=t(3147),i=t(419),c=t(7133);n.exports=function(p,v,m){var x=p.constructor;switch(v){case"[object ArrayBuffer]":return e(p);case"[object Boolean]":case"[object Date]":return new x(+p);case"[object DataView]":return a(p,m);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(p,m);case"[object Map]":case"[object Set]":return new x;case"[object Number]":case"[object String]":return new x(p);case"[object RegExp]":return u(p);case"[object Symbol]":return i(p)}}},8517:function(n,r,t){var e=t(3118),a=t(5924),u=t(5726);n.exports=function(i){return typeof i.constructor!="function"||u(i)?{}:e(a(i))}},5776:function(n){var r=/^(?:0|[1-9]\d*)$/;n.exports=function(t,e){var a=typeof t;return!!(e=e??9007199254740991)&&(a=="number"||a!="symbol"&&r.test(t))&&t>-1&&t%1==0&&t<e}},5403:function(n,r,t){var e=t(1469),a=t(3448),u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;n.exports=function(c,p){if(e(c))return!1;var v=typeof c;return!(v!="number"&&v!="symbol"&&v!="boolean"&&c!=null&&!a(c))||i.test(c)||!u.test(c)||p!=null&&c in Object(p)}},7019:function(n){n.exports=function(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}},5346:function(n,r,t){var e,a=t(4429),u=(e=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";n.exports=function(i){return!!u&&u in i}},5726:function(n){var r=Object.prototype;n.exports=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||r)}},9162:function(n,r,t){var e=t(3218);n.exports=function(a){return a==a&&!e(a)}},7040:function(n){n.exports=function(){this.__data__=[],this.size=0}},4125:function(n,r,t){var e=t(8470),a=Array.prototype.splice;n.exports=function(u){var i=this.__data__,c=e(i,u);return!(c<0)&&(c==i.length-1?i.pop():a.call(i,c,1),--this.size,!0)}},2117:function(n,r,t){var e=t(8470);n.exports=function(a){var u=this.__data__,i=e(u,a);return i<0?void 0:u[i][1]}},7518:function(n,r,t){var e=t(8470);n.exports=function(a){return e(this.__data__,a)>-1}},4705:function(n,r,t){var e=t(8470);n.exports=function(a,u){var i=this.__data__,c=e(i,a);return c<0?(++this.size,i.push([a,u])):i[c][1]=u,this}},4785:function(n,r,t){var e=t(1989),a=t(8407),u=t(7071);n.exports=function(){this.size=0,this.__data__={hash:new e,map:new(u||a),string:new e}}},1285:function(n,r,t){var e=t(5050);n.exports=function(a){var u=e(this,a).delete(a);return this.size-=u?1:0,u}},6e3:function(n,r,t){var e=t(5050);n.exports=function(a){return e(this,a).get(a)}},9916:function(n,r,t){var e=t(5050);n.exports=function(a){return e(this,a).has(a)}},5265:function(n,r,t){var e=t(5050);n.exports=function(a,u){var i=e(this,a),c=i.size;return i.set(a,u),this.size+=i.size==c?0:1,this}},8776:function(n){n.exports=function(r){var t=-1,e=Array(r.size);return r.forEach(function(a,u){e[++t]=[u,a]}),e}},2634:function(n){n.exports=function(r,t){return function(e){return e!=null&&e[r]===t&&(t!==void 0||r in Object(e))}}},4523:function(n,r,t){var e=t(8306);n.exports=function(a){var u=e(a,function(c){return i.size===500&&i.clear(),c}),i=u.cache;return u}},4536:function(n,r,t){var e=t(852)(Object,"create");n.exports=e},6916:function(n,r,t){var e=t(5569)(Object.keys,Object);n.exports=e},3498:function(n){n.exports=function(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}},1167:function(n,r,t){n=t.nmd(n);var e=t(1957),a=r&&!r.nodeType&&r,u=a&&n&&!n.nodeType&&n,i=u&&u.exports===a&&e.process,c=function(){try{var p=u&&u.require&&u.require("util").types;return p||i&&i.binding&&i.binding("util")}catch{}}();n.exports=c},2333:function(n){var r=Object.prototype.toString;n.exports=function(t){return r.call(t)}},5569:function(n){n.exports=function(r,t){return function(e){return r(t(e))}}},5639:function(n,r,t){var e=t(1957),a=typeof self=="object"&&self&&self.Object===Object&&self,u=e||a||Function("return this")();n.exports=u},619:function(n){n.exports=function(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this}},2385:function(n){n.exports=function(r){return this.__data__.has(r)}},1814:function(n){n.exports=function(r){var t=-1,e=Array(r.size);return r.forEach(function(a){e[++t]=a}),e}},7465:function(n,r,t){var e=t(8407);n.exports=function(){this.__data__=new e,this.size=0}},3779:function(n){n.exports=function(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}},7599:function(n){n.exports=function(r){return this.__data__.get(r)}},4758:function(n){n.exports=function(r){return this.__data__.has(r)}},4309:function(n,r,t){var e=t(8407),a=t(7071),u=t(3369);n.exports=function(i,c){var p=this.__data__;if(p instanceof e){var v=p.__data__;if(!a||v.length<199)return v.push([i,c]),this.size=++p.size,this;p=this.__data__=new u(v)}return p.set(i,c),this.size=p.size,this}},5514:function(n,r,t){var e=t(4523),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,i=e(function(c){var p=[];return c.charCodeAt(0)===46&&p.push(""),c.replace(a,function(v,m,x,_){p.push(x?_.replace(u,"$1"):m||v)}),p});n.exports=i},327:function(n,r,t){var e=t(3448);n.exports=function(a){if(typeof a=="string"||e(a))return a;var u=a+"";return u=="0"&&1/a==-1/0?"-0":u}},346:function(n){var r=Function.prototype.toString;n.exports=function(t){if(t!=null){try{return r.call(t)}catch{}try{return t+""}catch{}}return""}},7813:function(n){n.exports=function(r,t){return r===t||r!=r&&t!=t}},7361:function(n,r,t){var e=t(7786);n.exports=function(a,u,i){var c=a==null?void 0:e(a,u);return c===void 0?i:c}},5694:function(n,r,t){var e=t(9454),a=t(7005),u=Object.prototype,i=u.hasOwnProperty,c=u.propertyIsEnumerable,p=e(function(){return arguments}())?e:function(v){return a(v)&&i.call(v,"callee")&&!c.call(v,"callee")};n.exports=p},1469:function(n){var r=Array.isArray;n.exports=r},8612:function(n,r,t){var e=t(3560),a=t(1780);n.exports=function(u){return u!=null&&a(u.length)&&!e(u)}},4144:function(n,r,t){n=t.nmd(n);var e=t(5639),a=t(5062),u=r&&!r.nodeType&&r,i=u&&n&&!n.nodeType&&n,c=i&&i.exports===u?e.Buffer:void 0,p=(c?c.isBuffer:void 0)||a;n.exports=p},3560:function(n,r,t){var e=t(4239),a=t(3218);n.exports=function(u){if(!a(u))return!1;var i=e(u);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"}},1780:function(n){n.exports=function(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=9007199254740991}},6688:function(n,r,t){var e=t(5588),a=t(1717),u=t(1167),i=u&&u.isMap,c=i?a(i):e;n.exports=c},3218:function(n){n.exports=function(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}},7005:function(n){n.exports=function(r){return r!=null&&typeof r=="object"}},2928:function(n,r,t){var e=t(9221),a=t(1717),u=t(1167),i=u&&u.isSet,c=i?a(i):e;n.exports=c},3448:function(n,r,t){var e=t(4239),a=t(7005);n.exports=function(u){return typeof u=="symbol"||a(u)&&e(u)=="[object Symbol]"}},6719:function(n,r,t){var e=t(8749),a=t(1717),u=t(1167),i=u&&u.isTypedArray,c=i?a(i):e;n.exports=c},3674:function(n,r,t){var e=t(4636),a=t(280),u=t(8612);n.exports=function(i){return u(i)?e(i):a(i)}},1704:function(n,r,t){var e=t(4636),a=t(313),u=t(8612);n.exports=function(i){return u(i)?e(i,!0):a(i)}},6410:function(n,r,t){var e=t(5990),a=t(1573);n.exports=function(u){return a(e(u,1))}},8306:function(n,r,t){var e=t(3369);function a(u,i){if(typeof u!="function"||i!=null&&typeof i!="function")throw new TypeError("Expected a function");var c=function(){var p=arguments,v=i?i.apply(this,p):p[0],m=c.cache;if(m.has(v))return m.get(v);var x=u.apply(this,p);return c.cache=m.set(v,x)||m,x};return c.cache=new(a.Cache||e),c}a.Cache=e,n.exports=a},479:function(n){n.exports=function(){return[]}},5062:function(n){n.exports=function(){return!1}},9833:function(n,r,t){var e=t(531);n.exports=function(a){return a==null?"":e(a)}}},z={};function S(n){var r=z[n];if(r!==void 0)return r.exports;var t=z[n]={id:n,loaded:!1,exports:{}};return A[n](t,t.exports,S),t.loaded=!0,t.exports}S.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return S.d(r,{a:r}),r},S.d=function(n,r){for(var t in r)S.o(r,t)&&!S.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:r[t]})},S.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),S.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},S.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},S.nmd=function(n){return n.paths=[],n.children||(n.children=[]),n};var E={};return function(){S.r(E),S.d(E,{Collection:function(){return _},FetchServer:function(){return dt},Server:function(){return H},Single:function(){return T},default:function(){return ot}});var n=S(7361),r=S.n(n),t=S(6410),e=S.n(t);function a(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function u(f,l){for(var d=0;d<l.length;d++){var o=l[d];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(f,o.key,o)}}function i(f,l,d){return l in f?Object.defineProperty(f,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):f[l]=d,f}function c(f,l){return function(d){if(Array.isArray(d))return d}(f)||function(d,o){var s=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(s!=null){var h,b,g=[],y=!0,j=!1;try{for(s=s.call(d);!(y=(h=s.next()).done)&&(g.push(h.value),!o||g.length!==o);y=!0);}catch(O){j=!0,b=O}finally{try{y||s.return==null||s.return()}finally{if(j)throw b}}return g}}(f,l)||function(d,o){if(d){if(typeof d=="string")return p(d,o);var s=Object.prototype.toString.call(d).slice(8,-1);if(s==="Object"&&d.constructor&&(s=d.constructor.name),s==="Map"||s==="Set")return Array.from(d);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return p(d,o)}}(f,l)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function p(f,l){(l==null||l>f.length)&&(l=f.length);for(var d=0,o=new Array(l);d<l;d++)o[d]=f[d];return o}function v(f){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},v(f)}var m=function(f,l){if(f.indexOf("_q")!==-1){var d=f.replace(/(_q)$/,""),o=new RegExp(l,"i");return function(w){var J;return((J=r()(w,d))===null||J===void 0?void 0:J.match(o))!==null}}if(f.indexOf("_lte")!==-1){var s=f.replace(/(_lte)$/,"");return function(w){return r()(w,s)<=l}}if(f.indexOf("_gte")!==-1){var h=f.replace(/(_gte)$/,"");return function(w){return r()(w,h)>=l}}if(f.indexOf("_lt")!==-1){var b=f.replace(/(_lt)$/,"");return function(w){return r()(w,b)<l}}if(f.indexOf("_gt")!==-1){var g=f.replace(/(_gt)$/,"");return function(w){return r()(w,g)>l}}if(f.indexOf("_neq_any")!==-1){var y=f.replace(/(_neq_any)$/,""),j=Array.isArray(l)?l:[l];return function(w){return j.every(function(J){return r()(w,y)!=J})}}if(f.indexOf("_neq")!==-1){var O=f.replace(/(_neq)$/,"");return function(w){return r()(w,O)!=l}}if(f.indexOf("_eq_any")!==-1){var D=f.replace(/(_eq_any)$/,""),L=Array.isArray(l)?l:[l];return function(w){return L.some(function(J){return r()(w,D)==J})}}if(f.indexOf("_eq")!==-1){var Z=f.replace(/(_eq)$/,"");return function(w){return r()(w,Z)==l}}if(f.indexOf("_inc_any")!==-1){var Y=f.replace(/(_inc_any)$/,""),V=Array.isArray(l)?l:[l];return function(w){return V.some(function(J){return r()(w,Y).includes(J)})}}if(f.indexOf("_inc")!==-1){var tt=f.replace(/(_inc)$/,""),Q=Array.isArray(l)?l:[l];return function(w){return Q.every(function(J){return r()(w,tt).includes(J)})}}if(f.indexOf("_ninc_any")!==-1){var K=f.replace(/(_ninc_any)$/,""),nt=Array.isArray(l)?l:[l];return function(w){return nt.every(function(J){return!r()(w,K).includes(J)})}}return Array.isArray(l)?function(w){return Array.isArray(r()(w,f))?(J=function(it){return ct=r()(w,f),yt=function(W){return W==it},ct.reduce(function(W,ut){return W||yt(ut)},!1);var ct,yt},l.reduce(function(it,ct){return it&&J(ct)},!0)):l.filter(function(it){return it==r()(w,f)}).length>0;var J}:v(l)==="object"?function(w){return e()(l)(r()(w,f))}:function(w){return Array.isArray(r()(w,f))&&typeof l=="string"?r()(w,f).indexOf(l)!==-1:typeof r()(w,f)=="boolean"&&typeof l=="string"?r()(w,f)==(l==="true"):r()(w,f)==l}};function x(f,l){if(typeof l=="function")return f.filter(l);if(l instanceof Object){var d=Object.keys(l).map(function(o){if(o==="q"){var s=new RegExp(l.q,"i");return function g(y){for(var j in y)if(v(y[j])==="object"&&g(y[j])||y[j]&&y[j].match&&y[j].match(s)!==null)return!0;return!1}}var h=o.split("."),b=l[o];return h.length>1?function(g){var y=function(L,Z){return L.reduce(function(Y,V,tt){if(Y!=null)return Y;var Q=L.slice(0,tt+1).join("."),K=L.slice(tt+1).join("."),nt=r()(Z,Q);return Array.isArray(nt)&&tt<L.length-1?[Q,K]:void 0},void 0)}(h,g);if(y){var j=c(y,2),O=j[0],D=j[1];return x(r()(g,O),i({},D,b)).length>0}return m(o,b)(g)}:m(o,b)});return f.filter(function(o){return d.reduce(function(s,h){return s&&h(o)},!0)})}throw new Error("Unsupported filter type")}var _=function(){function f(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"id";if(a(this,f),i(this,"sequence",0),i(this,"items",[]),i(this,"server",null),i(this,"name",null),i(this,"identifierName","id"),!Array.isArray(o))throw new Error("Can't initialize a Collection with anything else than an array of items");this.identifierName=s,o.map(this.addOne.bind(this))}var l,d;return l=f,(d=[{key:"setServer",value:function(o){this.server=o}},{key:"setName",value:function(o){this.name=o}},{key:"_oneToManyEmbedder",value:function(o){var s=this;if(this.name==null)throw new Error("Can't embed references without a collection name");var h=this.name.slice(0,-1)+"_id";return function(b){if(s.server==null)throw new Error("Can't embed references without a server");var g=s.server.collections[o];if(!g)throw new Error("Can't embed a non-existing collection ".concat(o));return Array.isArray(b[o])?b[o]=g.getAll({filter:function(y){return b[o].indexOf(y[g.identifierName])!==-1}}):b[o]=g.getAll({filter:function(y){return y[h]==b[s.identifierName]}}),b}}},{key:"_manyToOneEmbedder",value:function(o){var s=this,h=o+"s",b=o+"_id";return function(g){if(s.server==null)throw new Error("Can't embed references without a server");var y=s.server.collections[h];if(!y)throw new Error("Can't embed a non-existing collection ".concat(o));try{g[o]=y.getOne(g[b])}catch{}return g}}},{key:"_itemEmbedder",value:function(o){var s=this,h=(Array.isArray(o)?o:[o]).map(function(b){return b.endsWith("s")?s._oneToManyEmbedder(b):s._manyToOneEmbedder(b)});return function(b){return h.reduce(function(g,y){return y(g)},b)}}},{key:"getCount",value:function(o){return this.getAll(o).length}},{key:"getAll",value:function(o){var s=this.items.slice(0);return o&&(o.filter&&(s=x(s,o.filter)),o.sort&&(s=function(h,b){if(typeof b=="function")return h.sort(b);if(typeof b=="string")return h.sort(function(j,O){return j[b]>O[b]?1:j[b]<O[b]?-1:0});if(Array.isArray(b)){var g=b[0],y=b[1].toLowerCase()=="asc"?1:-1;return h.sort(function(j,O){return j[g]>O[g]?y:j[g]<O[g]?-1*y:0})}throw new Error("Unsupported sort type")}(s,o.sort)),o.range&&(s=function(h,b){if(Array.isArray(b))return h.slice(b[0],b[1]!==void 0?b[1]+1:void 0);throw new Error("Unsupported range type")}(s,o.range)),s=s.map(function(h){return Object.assign({},h)}),o.embed&&this.server&&(s=s.map(this._itemEmbedder(o.embed)))),s}},{key:"getIndex",value:function(o){var s=this;return this.items.findIndex(function(h){return h[s.identifierName]==o})}},{key:"getOne",value:function(o,s){var h=this.getIndex(o);if(h===-1)throw new Error("No item with identifier ".concat(o));var b=this.items[h];return b=Object.assign({},b),s&&s.embed&&this.server&&(b=this._itemEmbedder(s.embed)(b)),b}},{key:"addOne",value:function(o){var s=o[this.identifierName];if(s!==void 0){if(this.getIndex(s)!==-1)throw new Error("An item with the identifier ".concat(s," already exists"));this.sequence=Math.max(this.sequence,s)+1}else o[this.identifierName]=this.sequence++;return this.items.push(o),Object.assign({},o)}},{key:"updateOne",value:function(o,s){var h=this.getIndex(o);if(h===-1)throw new Error("No item with identifier ".concat(o));for(var b in s)this.items[h][b]=s[b];return Object.assign({},this.items[h])}},{key:"removeOne",value:function(o){var s=this.getIndex(o);if(s===-1)throw new Error("No item with identifier ".concat(o));var h=this.items[s];return this.items.splice(s,1),o==this.sequence-1&&this.sequence--,h}}])&&u(l.prototype,d),Object.defineProperty(l,"prototype",{writable:!1}),f}();function k(f,l){for(var d=0;d<l.length;d++){var o=l[d];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(f,o.key,o)}}function I(f,l,d){return l in f?Object.defineProperty(f,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):f[l]=d,f}var T=function(){function f(o){if(function(s,h){if(!(s instanceof h))throw new TypeError("Cannot call a class as a function")}(this,f),I(this,"obj",null),I(this,"server",null),I(this,"name",null),!(o instanceof Object))throw new Error("Can't initialize a Single with anything except an object");this.obj=o}var l,d;return l=f,(d=[{key:"setServer",value:function(o){this.server=o}},{key:"setName",value:function(o){this.name=o}},{key:"_oneToManyEmbedder",value:function(o){var s=this;return function(h){if(s.server==null)throw new Error("Can't embed references without a server");var b=s.server.collections[o];if(!b)throw new Error("Can't embed a non-existing collection ".concat(o));return h[o]=b.getAll({filter:function(g){return h[o].indexOf(g[b.identifierName])!==-1}}),h}}},{key:"_manyToOneEmbedder",value:function(o){var s=this,h=o+"s",b=o+"_id";return function(g){if(s.server==null)throw new Error("Can't embed references without a server");var y=s.server.collections[h];if(!y)throw new Error("Can't embed a non-existing collection ".concat(o));try{g[o]=y.getOne(g[b])}catch{}return g}}},{key:"_itemEmbedder",value:function(o){var s=this,h=(Array.isArray(o)?o:[o]).map(function(b){return b.endsWith("s")?s._oneToManyEmbedder(b):s._manyToOneEmbedder(b)});return function(b){return h.reduce(function(g,y){return y(g)},b)}}},{key:"getOnly",value:function(o){var s=this.obj;return o&&o.embed&&this.server&&(s=Object.assign({},s),s=this._itemEmbedder(o.embed)(s)),s}},{key:"updateOnly",value:function(o){for(var s in o)this.obj[s]=o[s];return this.obj}}])&&k(l.prototype,d),Object.defineProperty(l,"prototype",{writable:!1}),f}();function q(f,l){return function(d){if(Array.isArray(d))return d}(f)||function(d,o){var s=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(s!=null){var h,b,g=[],y=!0,j=!1;try{for(s=s.call(d);!(y=(h=s.next()).done)&&(g.push(h.value),!o||g.length!==o);y=!0);}catch(O){j=!0,b=O}finally{try{y||s.return==null||s.return()}finally{if(j)throw b}}return g}}(f,l)||function(d,o){if(d){if(typeof d=="string")return U(d,o);var s=Object.prototype.toString.call(d).slice(8,-1);if(s==="Object"&&d.constructor&&(s=d.constructor.name),s==="Map"||s==="Set")return Array.from(d);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return U(d,o)}}(f,l)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function U(f,l){(l==null||l>f.length)&&(l=f.length);for(var d=0,o=new Array(l);d<l;d++)o[d]=f[d];return o}function $(f){if(!f)return{};var l={};return f.split("&").map(function(d){if(d.indexOf("=")===-1)l[d]=!0;else{var o=q(d.split("="),2),s=o[0],h=o[1];h.indexOf("[")!==0&&h.indexOf("{")!==0||(h=JSON.parse(h)),l[s.trim()]=h}}),l}function M(f,l){var d=typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(!d){if(Array.isArray(f)||(d=function(y,j){if(y){if(typeof y=="string")return P(y,j);var O=Object.prototype.toString.call(y).slice(8,-1);if(O==="Object"&&y.constructor&&(O=y.constructor.name),O==="Map"||O==="Set")return Array.from(y);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return P(y,j)}}(f))||l&&f&&typeof f.length=="number"){d&&(f=d);var o=0,s=function(){};return{s,n:function(){return o>=f.length?{done:!0}:{done:!1,value:f[o++]}},e:function(y){throw y},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var h,b=!0,g=!1;return{s:function(){d=d.call(f)},n:function(){var y=d.next();return b=y.done,y},e:function(y){g=!0,h=y},f:function(){try{b||d.return==null||d.return()}finally{if(g)throw h}}}}function P(f,l){(l==null||l>f.length)&&(l=f.length);for(var d=0,o=new Array(l);d<l;d++)o[d]=f[d];return o}function G(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function X(f,l){for(var d=0;d<l.length;d++){var o=l[d];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(f,o.key,o)}}function F(f,l,d){return l in f?Object.defineProperty(f,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):f[l]=d,f}var H=function(){function f(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";G(this,f),F(this,"baseUrl",null),F(this,"loggingEnabled",!1),F(this,"defaultQuery",function(){}),F(this,"batchUrl",null),F(this,"collections",{}),F(this,"singles",{}),F(this,"requestInterceptors",[]),F(this,"responseInterceptors",[]),this.baseUrl=o}var l,d;return l=f,d=[{key:"init",value:function(o){for(var s in o)Array.isArray(o[s])?this.addCollection(s,new _(o[s],"id")):this.addSingle(s,new T(o[s]))}},{key:"toggleLogging",value:function(){this.loggingEnabled=!this.loggingEnabled}},{key:"setDefaultQuery",value:function(o){this.defaultQuery=o}},{key:"setBatchUrl",value:function(o){this.batchUrl=o}},{key:"setBatch",value:function(o){console.warn("Server.setBatch() is deprecated, use Server.setBatchUrl() instead"),this.batchUrl=o}},{key:"addCollection",value:function(o,s){this.collections[o]=s,s.setServer(this),s.setName(o)}},{key:"getCollection",value:function(o){return this.collections[o]}},{key:"getCollectionNames",value:function(){return Object.keys(this.collections)}},{key:"addSingle",value:function(o,s){this.singles[o]=s,s.setServer(this),s.setName(o)}},{key:"getSingle",value:function(o){return this.singles[o]}},{key:"getSingleNames",value:function(){return Object.keys(this.singles)}},{key:"addRequestInterceptor",value:function(o){this.requestInterceptors.push(o)}},{key:"addResponseInterceptor",value:function(o){this.responseInterceptors.push(o)}},{key:"getCount",value:function(o,s){return this.collections[o].getCount(s)}},{key:"getAll",value:function(o,s){return this.collections[o].getAll(s)}},{key:"getOne",value:function(o,s,h){return this.collections[o].getOne(s,h)}},{key:"addOne",value:function(o,s){return this.collections.hasOwnProperty(o)||this.addCollection(o,new _([],"id")),this.collections[o].addOne(s)}},{key:"updateOne",value:function(o,s,h){return this.collections[o].updateOne(s,h)}},{key:"removeOne",value:function(o,s){return this.collections[o].removeOne(s)}},{key:"getOnly",value:function(o,s){return this.singles[o].getOnly()}},{key:"updateOnly",value:function(o,s){return this.singles[o].updateOnly(s)}},{key:"decode",value:function(o){if(o.queryString=decodeURIComponent(o.url.slice(o.url.indexOf("?")+1)),o.params=$(o.queryString),o.requestBody)try{o.json=JSON.parse(o.requestBody)}catch{}return this.requestInterceptors.reduce(function(s,h){return h(s)},o)}},{key:"respond",value:function(o,s,h){var b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:200;s||(s={}),s["Content-Type"]||(s["Content-Type"]="application/json");var g={status:b,headers:s,body:o};return g=this.responseInterceptors.reduce(function(y,j){return j(y,h)},g),this.log(h,g),h.respond(g.status,g.headers,JSON.stringify(g.body))}},{key:"log",value:function(o,s){this.loggingEnabled&&(console.group?(console.groupCollapsed(o.method,o.url,"(FakeRest)"),console.group("request"),console.log(o.method,o.url),console.log("headers",o.requestHeaders),console.log("body   ",o.requestBody),console.groupEnd(),console.group("response",s.status),console.log("headers",s.headers),console.log("body   ",s.body),console.groupEnd(),console.groupEnd()):(console.log("FakeRest request ",o.method,o.url,"headers",o.requestHeaders,"body",o.requestBody),console.log("FakeRest response",s.status,"headers",s.headers,"body",s.body)))}},{key:"batch",value:function(o){var s=o.json,h=this.handle.bind(this),b=Object.keys(s).reduce(function(g,y){var j,O={url:s[y],method:"GET",params:{},respond:function(D,L,Z){j={code:D,headers:Object.keys(L||{}).map(function(Y){return{name:Y,value:L[Y]}}),body:Z||{}}}};return h(O),g[y]=j||{code:404,headers:[],body:{}},g},{});return this.respond(b,{},o,200)}},{key:"handle",value:function(o){if(o=this.decode(o),this.batchUrl&&this.batchUrl===o.url&&o.method==="POST")return this.batch(o);var s,h=M(this.getSingleNames());try{for(h.s();!(s=h.n()).done;){var b=s.value;if(o.url.match(new RegExp("^"+this.baseUrl+"\\/("+b+")(\\/?.*)?$"))){if(o.method=="GET")try{var g=this.getOnly(b);return this.respond(g,null,o)}catch{return o.respond(404)}if(o.method=="PUT")try{var y=this.updateOnly(b,o.json);return this.respond(y,null,o)}catch{return o.respond(404)}if(o.method=="PATCH")try{var j=this.updateOnly(b,o.json);return this.respond(j,null,o)}catch{return o.respond(404)}}}}catch(ut){h.e(ut)}finally{h.f()}var O=o.url.match(new RegExp("^"+this.baseUrl+"\\/([^\\/?]+)(\\/(\\d+))?(\\?.*)?$"));if(O){var D=O[1],L=Object.assign({},this.defaultQuery(D),o.params);if(O[2]){if(!this.getCollection(D))return;var Z=O[3];if(o.method=="GET")try{var Y=this.getOne(D,Z,L);return this.respond(Y,null,o)}catch{return o.respond(404)}if(o.method=="PUT")try{var V=this.updateOne(D,Z,o.json);return this.respond(V,null,o)}catch{return o.respond(404)}if(o.method=="PATCH")try{var tt=this.updateOne(D,Z,o.json);return this.respond(tt,null,o)}catch{return o.respond(404)}if(o.method=="DELETE")try{var Q=this.removeOne(D,Z);return this.respond(Q,null,o)}catch{return o.respond(404)}}else{if(o.method=="GET"){if(!this.getCollection(D))return;var K,nt,w,J=this.getCount(D,L.filter?{filter:L.filter}:{});if(J>0){K=this.getAll(D,L);var it=L.range?L.range[0]:0,ct=L.range?Math.min(K.length-1+it,L.range[1]):K.length-1;nt="items ".concat(it,"-").concat(ct,"/").concat(J),w=K.length==J?200:206}else K=[],nt="items */0",w=200;return this.respond(K,{"Content-Range":nt},o,w)}if(o.method=="POST"){var yt=this.addOne(D,o.json),W=this.baseUrl+"/"+D+"/"+yt[this.getCollection(D).identifierName];return this.respond(yt,{Location:W},o,201)}}}}},{key:"getHandler",value:function(){return this.handle.bind(this)}}],d&&X(l.prototype,d),Object.defineProperty(l,"prototype",{writable:!1}),f}();function et(f){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},et(f)}function pt(f,l){var d=typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(!d){if(Array.isArray(f)||(d=function(y,j){if(y){if(typeof y=="string")return at(y,j);var O=Object.prototype.toString.call(y).slice(8,-1);if(O==="Object"&&y.constructor&&(O=y.constructor.name),O==="Map"||O==="Set")return Array.from(y);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return at(y,j)}}(f))||l&&f&&typeof f.length=="number"){d&&(f=d);var o=0,s=function(){};return{s,n:function(){return o>=f.length?{done:!0}:{done:!1,value:f[o++]}},e:function(y){throw y},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var h,b=!0,g=!1;return{s:function(){d=d.call(f)},n:function(){var y=d.next();return b=y.done,y},e:function(y){g=!0,h=y},f:function(){try{b||d.return==null||d.return()}finally{if(g)throw h}}}}function at(f,l){(l==null||l>f.length)&&(l=f.length);for(var d=0,o=new Array(l);d<l;d++)o[d]=f[d];return o}function R(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function ft(f,l){for(var d=0;d<l.length;d++){var o=l[d];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(f,o.key,o)}}function C(f,l){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,o){return d.__proto__=o,d},C(f,l)}function rt(f){var l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var d,o=ht(f);if(l){var s=ht(this).constructor;d=Reflect.construct(o,arguments,s)}else d=o.apply(this,arguments);return lt(this,d)}}function lt(f,l){if(l&&(et(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(f)}function ht(f){return ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},ht(f)}var dt=function(f){(function(h,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(b&&b.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),b&&C(h,b)})(s,f);var l,d,o=rt(s);function s(){return R(this,s),o.apply(this,arguments)}return l=s,(d=[{key:"decode",value:function(h,b){var g=this,y=typeof h=="string"?new Request(h,b):h;return y.queryString=decodeURIComponent(y.url.slice(y.url.indexOf("?")+1)),y.params=$(y.queryString),y.text().then(function(j){y.requestBody=j;try{y.requestJson=JSON.parse(j)}catch{}}).then(function(){return g.requestInterceptors.reduce(function(j,O){return O(j)},y)})}},{key:"respond",value:function(h,b){return h=this.responseInterceptors.reduce(function(g,y){return y(g,b)},h),this.log(b,h),h.headers=new Headers(h.headers),h}},{key:"log",value:function(h,b){this.loggingEnabled&&(console.group?(console.groupCollapsed(h.method,h.url,"(FakeRest)"),console.group("request"),console.log(h.method,h.url),console.log("headers",h.headers),console.log("body   ",h.requestBody),console.groupEnd(),console.group("response",b.status),console.log("headers",b.headers),console.log("body   ",b.body),console.groupEnd(),console.groupEnd()):(console.log("FakeRest request ",h.method,h.url,"headers",h.headers,"body",h.requestBody),console.log("FakeRest response",b.status,"headers",b.headers,"body",b.body)))}},{key:"batch",value:function(h){throw new Error("not implemented")}},{key:"handle",value:function(h,b){var g=this;return this.decode(h,b).then(function(y){var j={headers:{"Content-Type":"application/json"},status:200};if(g.batchUrl&&g.batchUrl===y.url&&y.method==="POST")return g.batch(y);var O,D=pt(g.getSingleNames());try{for(D.s();!(O=D.n()).done;){var L=O.value;if(y.url.match(new RegExp("^"+g.baseUrl+"\\/("+L+")(\\/?.*)?$"))){if(y.method=="GET"){try{j.body=g.getOnly(L)}catch{reponse.status=404}return g.respond(j,y)}if(y.method=="PUT"){try{j.body=g.updateOnly(L,y.requestJson)}catch{reponse.status=404}return g.respond(j,y)}if(y.method=="PATCH"){try{j.body=g.updateOnly(L,y.requestJson)}catch{reponse.status=404}return g.respond(j,y)}}}}catch(W){D.e(W)}finally{D.f()}var Z,Y=pt(g.getCollectionNames());try{for(Y.s();!(Z=Y.n()).done;){var V=Z.value,tt=y.url.match(new RegExp("^"+g.baseUrl+"\\/("+V+")(\\/(\\d+))?(\\?.*)?$"));if(tt){var Q=Object.assign({},g.defaultQuery(V),y.params);if(tt[2]){var K=tt[3];if(y.method=="GET"){try{j.body=g.getOne(V,K,Q)}catch{j.status=404}return g.respond(j,y)}if(y.method=="PUT"){try{j.body=g.updateOne(V,K,y.requestJson)}catch{j.status=404}return g.respond(j,y)}if(y.method=="PATCH"){try{j.body=g.updateOne(V,K,y.requestJson)}catch{j.status=404}return g.respond(j,y)}if(y.method=="DELETE"){try{j.body=g.removeOne(V,K)}catch{j.status=404}return g.respond(j,y)}}else{if(y.method=="GET"){var nt=g.getCount(V,Q.filter?{filter:Q.filter}:{});if(nt>0){var w=g.getAll(V,Q),J=Q.range?Q.range[0]:0,it=Q.range?Math.min(w.length-1+J,Q.range[1]):w.length-1;j.body=w,j.headers["Content-Range"]="items ".concat(J,"-").concat(it,"/").concat(nt),j.status=w.length==nt?200:206}else j.body=[],j.headers["Content-Range"]="items */0";return g.respond(j,y)}if(y.method=="POST"){var ct=g.addOne(V,y.requestJson),yt=g.baseUrl+"/"+V+"/"+ct[g.getCollection(V).identifierName];return j.body=ct,j.headers.Location=yt,j.status=201,g.respond(j,y)}}}}}catch(W){Y.e(W)}finally{Y.f()}return g.respond(j,y)})}}])&&ft(l.prototype,d),Object.defineProperty(l,"prototype",{writable:!1}),s}(H),ot={Server:H,FetchServer:dt,Collection:_,Single:T}}(),E}()})})(bt);var jt=bt.exports;const xt=gt(jt);var _t=globalThis&&globalThis.__extends||function(){var B=function(N,A){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,S){z.__proto__=S}||function(z,S){for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(z[E]=S[E])},B(N,A)};return function(N,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");B(N,A);function z(){this.constructor=N}N.prototype=A===null?Object.create(A):(z.prototype=A.prototype,new z)}}(),st=globalThis&&globalThis.__assign||function(){return st=Object.assign||function(B){for(var N,A=1,z=arguments.length;A<z;A++){N=arguments[A];for(var S in N)Object.prototype.hasOwnProperty.call(N,S)&&(B[S]=N[S])}return B},st.apply(this,arguments)};function Ot(B,N,A,z){console.group?(console.groupCollapsed(B,N,JSON.stringify(A)),console.log(z),console.groupEnd()):(console.log("FakeRest request ",B,N,A),console.log("FakeRest response",z))}const wt=function(B,N){N===void 0&&(N=!1);var A=new xt.Server;A.init(B),typeof window<"u"&&(window.restServer=A);function z(E,n,r){var t;switch(E){case"getList":{var e=r.pagination,a=e.page,u=e.perPage,i=r.sort,c=i.field,p=i.order,v={sort:[c,p],range:[(a-1)*u,a*u-1],filter:r.filter};return{data:A.getAll(n,v),total:A.getCount(n,{filter:r.filter})}}case"getOne":return{data:A.getOne(n,r.id,st({},r))};case"getMany":return{data:r.ids.map(function(_){return A.getOne(n,_)},st({},r))};case"getManyReference":{var m=r.pagination,a=m.page,u=m.perPage,x=r.sort,c=x.field,p=x.order,v={sort:[c,p],range:[(a-1)*u,a*u-1],filter:st(st({},r.filter),(t={},t[r.target]=r.id,t))};return{data:A.getAll(n,v),total:A.getCount(n,{filter:v.filter})}}case"update":return{data:A.updateOne(n,r.id,st({},r.data))};case"updateMany":return r.ids.forEach(function(_){return A.updateOne(n,_,st({},r.data))}),{data:r.ids};case"create":return{data:A.addOne(n,st({},r.data))};case"delete":return{data:A.removeOne(n,r.id)};case"deleteMany":return r.ids.forEach(function(_){return A.removeOne(n,_)}),{data:r.ids};default:return!1}}var S=function(E,n,r){var t=A.getCollection(n);if(!t&&E!=="create"){var e=new At('Undefined collection "'.concat(n,'"'));return e.code=1,Promise.reject(e)}var a;try{a=z(E,n,r)}catch(u){return console.error(u),Promise.reject(u)}return N&&Ot(E,n,r,a),Promise.resolve(a)};return{getList:function(E,n){return S("getList",E,n)},getOne:function(E,n){return S("getOne",E,n)},getMany:function(E,n){return S("getMany",E,n)},getManyReference:function(E,n){return S("getManyReference",E,n)},update:function(E,n){return S("update",E,n)},updateMany:function(E,n){return S("updateMany",E,n)},create:function(E,n){return S("create",E,n)},delete:function(E,n){return S("delete",E,n)},deleteMany:function(E,n){return S("deleteMany",E,n)}}};var At=function(B){_t(N,B);function N(){return B!==null&&B.apply(this,arguments)||this}return N}(Error);const vt=(B,N)=>{console.group?(console.groupCollapsed("exchange",JSON.stringify(B)),console.log(N),console.groupEnd()):(console.log("FakeRest request ","exchange",B),console.log("FakeRest response",N))},St=({pages:B},{PAGES_EDITOR:N},A,z,{path:S})=>{const E=S.split("/");switch(E[0]){case"pages":switch(E[2]){case"one":const n=B.filter(({tags:u})=>u.some(({name:i})=>i==="PUBLISHED"||z&&z.includes(N))).find(({id:u})=>u===E[3]);if(!n)return!1;const{id:r,title:t,content:e,files:a}=n;return!e||!e[A]?!1:{data:{id:r,title:t&&t[A],content:e[A],files:a&&a.map(({name:u})=>u)}};case"menu":return{data:B.filter(({tags:u})=>u.some(({name:i})=>i==="MENU")).map(({id:u,title:i})=>({id:u,title:i[A]}))};default:return!1}default:return!1}},kt=({resProvider:B,roles:N,localeProvider:{getLocale:A},authProvider:{getPermissions:z}})=>{const S=E=>Promise.all([A(),z()]).then(([n,r])=>St(B,N,n,r,E)).then(n=>(vt(E,n),n));return{...wt(B,!0),exchange:E=>S(E),log:vt}};export{kt as default};
