import{q as o,f as b}from"./index-076a2057.js";const i="/api",u=({localeProvider:{getLocale:c},authProvider:{getToken:f}})=>{const r=(t,d={})=>Promise.all([c(),f()]).then(([a,e])=>({...d,headers:new Headers({Accept:"application/json","Accept-Language":a}),...e?{user:{authenticated:!0,token:`Bearer ${e}`}}:{}})).then(a=>b(t,a));return{getList:(t,{pagination:d,sort:a,filter:e,options:n})=>{const{page:l,perPage:m}=d,{field:$,order:g}=a,h={page:l-1,size:m,sort:`${$},${g}`,...e};return r(`${i}/${t}/search/list?${o.stringify(h)}`,n).then(({json:s})=>({data:s._embedded?s._embedded[t]:[],total:s.page.totalElements}))},getOne:(t,{id:d,options:a})=>r(`${i}/${t}/${d}`,a).then(({json:e})=>({data:e})),getMany:(t,{ids:d,options:a})=>r(`${i}/${t}/search/findByIdIn?${o.stringify({ids:d})}`,a).then(({json:e})=>({data:e._embedded?e._embedded[t]:[]})),getManyReference:(t,{pagination:d,sort:a,filter:e,target:n,id:l,options:m})=>{const{page:$,perPage:g}=d,{field:h,order:s}=a,p={sort:JSON.stringify([h,s]),range:JSON.stringify([($-1)*g,$*g-1]),filter:JSON.stringify({...e,[n]:l})};return r(`${i}/${t}?${o.stringify(p)}`,m).then(({json:y})=>({data:y._embedded?y._embedded[t]:[],total:y.page.totalElements}))},update:(t,{id:d,data:a,options:e})=>r(`${i}/${t}/${d}`,{method:"PUT",body:JSON.stringify(a),...e}).then(({json:n})=>({data:n})),updateMany:(t,{data:d,options:a})=>Promise.all(d.map(({id:e,...n})=>r(`${i}/${t}/${e}`,{method:"PATCH",body:JSON.stringify(n),...a}))).then(e=>({data:e.map(n=>n.json)})),create:(t,{data:d,options:a})=>r(`${i}/${t}`,{method:"POST",body:JSON.stringify(d),...a}).then(({json:e})=>({data:{...d,id:e.id}})),delete:(t,{id:d,options:a})=>r(`${i}/${t}/${d}`,{method:"DELETE",...a}).then(({json:e})=>({data:e})),deleteMany:(t,{ids:d,options:a})=>Promise.all(d.map(e=>r(`${i}/${t}/${e}`,{method:"DELETE",...a}))).then(e=>({data:e.map(n=>n.json)})),exchange:({path:t,query:d,data:a,options:e})=>r((t.startsWith("/")?t:`${i}/${t}`)+(d?`?${o.stringify(d)}`:""),a?{body:JSON.stringify(a),...e}:e).then(({json:n})=>({data:n&&n._embedded?n._embedded[t.split("/")[0]]:n}))}};export{u as default};
