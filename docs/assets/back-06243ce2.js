import{q as l,f as _,_ as v,a as y}from"./index-43d74796.js";import{g as p,b}from"./back-0e5f36d1.js";const D=({basename:n=""}={})=>{const s=({parents:e,id:t})=>((e?e.join("/")+"/":"")+t).replace(/\./g,"/"),i={pathByData:(e,t,r,a)=>`${n}/static/${e}/${t}/${s(r)}/${a}`,originByData:(e,t,r)=>i.pathByData("origin",e,t,r)};return i},o="/api",E=({localeProvider:{getLocale:n},authProvider:{getToken:s}})=>{const i=(e,t={})=>Promise.all([n(),s()]).then(([r,a])=>({...t,headers:new Headers({Accept:"application/json","Accept-Language":r}),...a?{user:{authenticated:!0,token:`Bearer ${a}`}}:{}})).then(r=>_(e,r));return{getList:(e,{pagination:t,sort:r,filter:a,options:d})=>{const{page:m,perPage:h}=t,{field:c,order:$}=r,P={page:m-1,size:h,sort:`${c},${$}`,...a};return i(`${o}/${e}/search/list?${l.stringify(P)}`,d).then(({json:g})=>({data:g._embedded?g._embedded[e]:[],total:g.page.totalElements}))},getOne:(e,{id:t,options:r})=>i(`${o}/${e}/${t}`,r).then(({json:a})=>({data:a})),getMany:(e,{ids:t,options:r})=>i(`${o}/${e}/search/findByIdIn?${l.stringify({ids:t})}`,r).then(({json:a})=>({data:a._embedded?a._embedded[e]:[]})),getManyReference:(e,{pagination:t,sort:r,filter:a,target:d,id:m,options:h})=>{const{page:c,perPage:$}=t,{field:P,order:g}=r,f={sort:JSON.stringify([P,g]),range:JSON.stringify([(c-1)*$,c*$-1]),filter:JSON.stringify({...a,[d]:m})};return i(`${o}/${e}?${l.stringify(f)}`,h).then(({json:u})=>({data:u._embedded?u._embedded[e]:[],total:u.page.totalElements}))},update:(e,{id:t,data:r,options:a})=>i(`${o}/${e}/${t}`,{method:"PUT",body:JSON.stringify(r),...a}).then(({json:d})=>({data:d})),updateMany:(e,{data:t,options:r})=>Promise.all(t.map(({id:a,...d})=>i(`${o}/${e}/${a}`,{method:"PATCH",body:JSON.stringify(d),...r}))).then(a=>({data:a.map(d=>d.json)})),create:(e,{data:t,options:r})=>i(`${o}/${e}`,{method:"POST",body:JSON.stringify(t),...r}).then(({json:a})=>({data:{...t,id:a.id}})),delete:(e,{id:t,options:r})=>i(`${o}/${e}/${t}`,{method:"DELETE",...r}).then(({json:a})=>({data:a})),deleteMany:(e,{ids:t,options:r})=>Promise.all(t.map(a=>i(`${o}/${e}/${a}`,{method:"DELETE",...r}))).then(a=>({data:a.map(d=>d.json)})),exchange:({path:e,query:t,data:r,options:a})=>i((e.startsWith("/")?e:`${o}/${e}`)+(t?`?${l.stringify(t)}`:""),r?{body:JSON.stringify(r),...a}:a).then(({json:d})=>({data:d&&d._embedded?d._embedded[e.split("/")[0]]:d}))}},O={getLocaleProvider:p,getFuncProvider:D,getAuthProvider:b,getDataProvider:E},L=n=>v(Object.assign({"./messages/en.js":()=>y(()=>import("./en-616b3ac1.js"),["assets/en-616b3ac1.js","assets/index-43d74796.js"]),"./messages/ru.js":()=>y(()=>import("./ru-8654b378.js"),[])}),`./messages/${n}.js`).then(s=>s.default),{getLocaleProvider:S,getFuncProvider:A,getAuthProvider:J,getDataProvider:N}=O,I=n=>{const s=S({getLocaleMessages:L,...n}),i=A(n),e=J(n),t=N({localeProvider:s,authProvider:e,...n});return{localeProvider:s,funcProvider:i,authProvider:e,dataProvider:t}};export{I as default};
