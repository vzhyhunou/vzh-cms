import{q as l,f as v,_ as p,a as m}from"./index-b4caa353.js";import{g as _,b as D}from"./back-0e5f36d1.js";const E=({basename:i=""}={})=>{const d=({parents:e,id:t})=>((e?e.join("/")+"/":"")+t).replace(/\./g,"/"),n={pathByData:(e,t,r,a)=>`${i}/static/${e}/${t}/${d(r)}/${a}`,originByData:(e,t,r)=>n.pathByData("origin",e,t,r)};return n},s="/api",O=({localeProvider:{getLocale:i},authProvider:{getToken:d}})=>{const n=(e,t={})=>Promise.all([i(),d()]).then(([r,a])=>({...t,headers:new Headers({Accept:"application/json","Accept-Language":r}),...a?{user:{authenticated:!0,token:`Bearer ${a}`}}:{}})).then(r=>v(e,r));return{getList:(e,{pagination:t,sort:r,filter:a,options:o})=>{const{page:h,perPage:u}=t,{field:c,order:g}=r,P={page:h-1,size:u,sort:`${c},${g}`,...a};return n(`${s}/${e}/search/list?${l.stringify(P)}`,o).then(({json:$})=>({data:$.content||[],total:$.page.totalElements}))},getOne:(e,{id:t,options:r})=>n(`${s}/${e}/${t}`,r).then(({json:a})=>({data:a})),getMany:(e,{ids:t,options:r})=>n(`${s}/${e}/search/findByIdIn?${l.stringify({ids:t})}`,r).then(({json:a})=>({data:a.content||[]})),getManyReference:(e,{pagination:t,sort:r,filter:a,target:o,id:h,options:u})=>{const{page:c,perPage:g}=t,{field:P,order:$}=r,f={sort:JSON.stringify([P,$]),range:JSON.stringify([(c-1)*g,c*g-1]),filter:JSON.stringify({...a,[o]:h})};return n(`${s}/${e}?${l.stringify(f)}`,u).then(({json:y})=>({data:y.content||[],total:y.page.totalElements}))},update:(e,{id:t,data:r,options:a})=>n(`${s}/${e}/${t}`,{method:"PUT",body:JSON.stringify(r),...a}).then(({json:o})=>({data:o})),updateMany:(e,{data:t,options:r})=>Promise.all(t.map(({id:a,...o})=>n(`${s}/${e}/${a}`,{method:"PATCH",body:JSON.stringify(o),...r}))).then(a=>({data:a.map(o=>o.json)})),create:(e,{data:t,options:r})=>n(`${s}/${e}`,{method:"POST",body:JSON.stringify(t),...r}).then(({json:a})=>({data:{...t,id:a.id}})),delete:(e,{id:t,options:r})=>n(`${s}/${e}/${t}`,{method:"DELETE",...r}).then(({json:a})=>({data:a})),deleteMany:(e,{ids:t,options:r})=>Promise.all(t.map(a=>n(`${s}/${e}/${a}`,{method:"DELETE",...r}))).then(a=>({data:a.map(o=>o.json)})),exchange:({path:e,query:t,data:r,options:a})=>n((e.startsWith("/")?e:`${s}/${e}`)+(t?`?${l.stringify(t)}`:""),r?{body:JSON.stringify(r),...a}:a).then(({json:o})=>({data:o}))}},L={getLocaleProvider:_,getFuncProvider:E,getAuthProvider:D,getDataProvider:O},b=i=>p(Object.assign({"./messages/en.js":()=>m(()=>import("./en-1a69ddf0.js"),["assets/en-1a69ddf0.js","assets/index-b4caa353.js"]),"./messages/ru.js":()=>m(()=>import("./ru-8654b378.js"),[])}),`./messages/${i}.js`).then(d=>d.default),{getLocaleProvider:S,getFuncProvider:A,getAuthProvider:J,getDataProvider:N}=L,B=i=>{const d=S({getLocaleMessages:b,...i}),n=A(i),e=J(i),t=N({localeProvider:d,authProvider:e,...i});return{localeProvider:d,funcProvider:n,authProvider:e,dataProvider:t}};export{B as default};
