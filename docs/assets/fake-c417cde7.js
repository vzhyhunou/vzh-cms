import{g as gt,c as mt}from"./index-d3d00a3e.js";var bt={exports:{}};(function(B,I){(function(w,q){B.exports=q()})(mt,function(){return function(){var w={8552:function(n,e,t){var r=t(852)(t(5639),"DataView");n.exports=r},1989:function(n,e,t){var r=t(1789),u=t(401),a=t(7667),i=t(1327),c=t(1866);function p(v){var m=-1,j=v==null?0:v.length;for(this.clear();++m<j;){var x=v[m];this.set(x[0],x[1])}}p.prototype.clear=r,p.prototype.delete=u,p.prototype.get=a,p.prototype.has=i,p.prototype.set=c,n.exports=p},8407:function(n,e,t){var r=t(7040),u=t(4125),a=t(2117),i=t(7518),c=t(4705);function p(v){var m=-1,j=v==null?0:v.length;for(this.clear();++m<j;){var x=v[m];this.set(x[0],x[1])}}p.prototype.clear=r,p.prototype.delete=u,p.prototype.get=a,p.prototype.has=i,p.prototype.set=c,n.exports=p},7071:function(n,e,t){var r=t(852)(t(5639),"Map");n.exports=r},3369:function(n,e,t){var r=t(4785),u=t(1285),a=t(6e3),i=t(9916),c=t(5265);function p(v){var m=-1,j=v==null?0:v.length;for(this.clear();++m<j;){var x=v[m];this.set(x[0],x[1])}}p.prototype.clear=r,p.prototype.delete=u,p.prototype.get=a,p.prototype.has=i,p.prototype.set=c,n.exports=p},3818:function(n,e,t){var r=t(852)(t(5639),"Promise");n.exports=r},8525:function(n,e,t){var r=t(852)(t(5639),"Set");n.exports=r},8668:function(n,e,t){var r=t(3369),u=t(619),a=t(2385);function i(c){var p=-1,v=c==null?0:c.length;for(this.__data__=new r;++p<v;)this.add(c[p])}i.prototype.add=i.prototype.push=u,i.prototype.has=a,n.exports=i},6384:function(n,e,t){var r=t(8407),u=t(7465),a=t(3779),i=t(7599),c=t(4758),p=t(4309);function v(m){var j=this.__data__=new r(m);this.size=j.size}v.prototype.clear=u,v.prototype.delete=a,v.prototype.get=i,v.prototype.has=c,v.prototype.set=p,n.exports=v},2705:function(n,e,t){var r=t(5639).Symbol;n.exports=r},1149:function(n,e,t){var r=t(5639).Uint8Array;n.exports=r},577:function(n,e,t){var r=t(852)(t(5639),"WeakMap");n.exports=r},7412:function(n){n.exports=function(e,t){for(var r=-1,u=e==null?0:e.length;++r<u&&t(e[r],r,e)!==!1;);return e}},4963:function(n){n.exports=function(e,t){for(var r=-1,u=e==null?0:e.length,a=0,i=[];++r<u;){var c=e[r];t(c,r,e)&&(i[a++]=c)}return i}},4636:function(n,e,t){var r=t(2545),u=t(5694),a=t(1469),i=t(4144),c=t(5776),p=t(6719),v=Object.prototype.hasOwnProperty;n.exports=function(m,j){var x=a(m),E=!x&&u(m),U=!x&&!E&&i(m),C=!x&&!E&&!U&&p(m),N=x||E||U||C,R=N?r(m.length,String):[],F=R.length;for(var $ in m)!j&&!v.call(m,$)||N&&($=="length"||U&&($=="offset"||$=="parent")||C&&($=="buffer"||$=="byteLength"||$=="byteOffset")||c($,F))||R.push($);return R}},9932:function(n){n.exports=function(e,t){for(var r=-1,u=e==null?0:e.length,a=Array(u);++r<u;)a[r]=t(e[r],r,e);return a}},2488:function(n){n.exports=function(e,t){for(var r=-1,u=t.length,a=e.length;++r<u;)e[a+r]=t[r];return e}},2908:function(n){n.exports=function(e,t){for(var r=-1,u=e==null?0:e.length;++r<u;)if(t(e[r],r,e))return!0;return!1}},4865:function(n,e,t){var r=t(9465),u=t(7813),a=Object.prototype.hasOwnProperty;n.exports=function(i,c,p){var v=i[c];a.call(i,c)&&u(v,p)&&(p!==void 0||c in i)||r(i,c,p)}},8470:function(n,e,t){var r=t(7813);n.exports=function(u,a){for(var i=u.length;i--;)if(r(u[i][0],a))return i;return-1}},4037:function(n,e,t){var r=t(8363),u=t(3674);n.exports=function(a,i){return a&&r(i,u(i),a)}},3886:function(n,e,t){var r=t(8363),u=t(1704);n.exports=function(a,i){return a&&r(i,u(i),a)}},9465:function(n,e,t){var r=t(8777);n.exports=function(u,a,i){a=="__proto__"&&r?r(u,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):u[a]=i}},5990:function(n,e,t){var r=t(6384),u=t(7412),a=t(4865),i=t(4037),c=t(3886),p=t(4626),v=t(278),m=t(8805),j=t(1911),x=t(8234),E=t(6904),U=t(4160),C=t(3824),N=t(9148),R=t(8517),F=t(1469),$=t(4144),P=t(6688),G=t(3218),K=t(2928),L=t(3674),H=t(1704),et="[object Arguments]",pt="[object Function]",at="[object Object]",M={};M[et]=M["[object Array]"]=M["[object ArrayBuffer]"]=M["[object DataView]"]=M["[object Boolean]"]=M["[object Date]"]=M["[object Float32Array]"]=M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Map]"]=M["[object Number]"]=M[at]=M["[object RegExp]"]=M["[object Set]"]=M["[object String]"]=M["[object Symbol]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0,M["[object Error]"]=M[pt]=M["[object WeakMap]"]=!1,n.exports=function ft(T,rt,lt,yt,dt,ot){var f,l=1&rt,d=2&rt,o=4&rt;if(lt&&(f=dt?lt(T,yt,dt,ot):lt(T)),f!==void 0)return f;if(!G(T))return T;var s=F(T);if(s){if(f=C(T),!l)return v(T,f)}else{var y=U(T),b=y==pt||y=="[object GeneratorFunction]";if($(T))return p(T,l);if(y==at||y==et||b&&!dt){if(f=d||b?{}:R(T),!l)return d?j(T,c(f,T)):m(T,i(f,T))}else{if(!M[y])return dt?T:{};f=N(T,y,l)}}ot||(ot=new r);var g=ot.get(T);if(g)return g;ot.set(T,f),K(T)?T.forEach(function(_){f.add(ft(_,rt,lt,_,T,ot))}):P(T)&&T.forEach(function(_,O){f.set(O,ft(_,rt,lt,O,T,ot))});var h=s?void 0:(o?d?E:x:d?H:L)(T);return u(h||T,function(_,O){h&&(_=T[O=_]),a(f,O,ft(_,rt,lt,O,T,ot))}),f}},3118:function(n,e,t){var r=t(3218),u=Object.create,a=function(){function i(){}return function(c){if(!r(c))return{};if(u)return u(c);i.prototype=c;var p=new i;return i.prototype=void 0,p}}();n.exports=a},7786:function(n,e,t){var r=t(1811),u=t(327);n.exports=function(a,i){for(var c=0,p=(i=r(i,a)).length;a!=null&&c<p;)a=a[u(i[c++])];return c&&c==p?a:void 0}},8866:function(n,e,t){var r=t(2488),u=t(1469);n.exports=function(a,i,c){var p=i(a);return u(a)?p:r(p,c(a))}},4239:function(n,e,t){var r=t(2705),u=t(9607),a=t(2333),i=r?r.toStringTag:void 0;n.exports=function(c){return c==null?c===void 0?"[object Undefined]":"[object Null]":i&&i in Object(c)?u(c):a(c)}},9454:function(n,e,t){var r=t(4239),u=t(7005);n.exports=function(a){return u(a)&&r(a)=="[object Arguments]"}},939:function(n,e,t){var r=t(2492),u=t(7005);n.exports=function a(i,c,p,v,m){return i===c||(i==null||c==null||!u(i)&&!u(c)?i!=i&&c!=c:r(i,c,p,v,a,m))}},2492:function(n,e,t){var r=t(6384),u=t(7114),a=t(8351),i=t(6096),c=t(4160),p=t(1469),v=t(4144),m=t(6719),j="[object Arguments]",x="[object Array]",E="[object Object]",U=Object.prototype.hasOwnProperty;n.exports=function(C,N,R,F,$,P){var G=p(C),K=p(N),L=G?x:c(C),H=K?x:c(N),et=(L=L==j?E:L)==E,pt=(H=H==j?E:H)==E,at=L==H;if(at&&v(C)){if(!v(N))return!1;G=!0,et=!1}if(at&&!et)return P||(P=new r),G||m(C)?u(C,N,R,F,$,P):a(C,N,L,R,F,$,P);if(!(1&R)){var M=et&&U.call(C,"__wrapped__"),ft=pt&&U.call(N,"__wrapped__");if(M||ft){var T=M?C.value():C,rt=ft?N.value():N;return P||(P=new r),$(T,rt,R,F,P)}}return!!at&&(P||(P=new r),i(C,N,R,F,$,P))}},5588:function(n,e,t){var r=t(4160),u=t(7005);n.exports=function(a){return u(a)&&r(a)=="[object Map]"}},2958:function(n,e,t){var r=t(6384),u=t(939);n.exports=function(a,i,c,p){var v=c.length,m=v,j=!p;if(a==null)return!m;for(a=Object(a);v--;){var x=c[v];if(j&&x[2]?x[1]!==a[x[0]]:!(x[0]in a))return!1}for(;++v<m;){var E=(x=c[v])[0],U=a[E],C=x[1];if(j&&x[2]){if(U===void 0&&!(E in a))return!1}else{var N=new r;if(p)var R=p(U,C,E,a,i,N);if(!(R===void 0?u(C,U,3,p,N):R))return!1}}return!0}},8458:function(n,e,t){var r=t(3560),u=t(5346),a=t(3218),i=t(346),c=/^\[object .+?Constructor\]$/,p=Function.prototype,v=Object.prototype,m=p.toString,j=v.hasOwnProperty,x=RegExp("^"+m.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(E){return!(!a(E)||u(E))&&(r(E)?x:c).test(i(E))}},9221:function(n,e,t){var r=t(4160),u=t(7005);n.exports=function(a){return u(a)&&r(a)=="[object Set]"}},8749:function(n,e,t){var r=t(4239),u=t(1780),a=t(7005),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,n.exports=function(c){return a(c)&&u(c.length)&&!!i[r(c)]}},280:function(n,e,t){var r=t(5726),u=t(6916),a=Object.prototype.hasOwnProperty;n.exports=function(i){if(!r(i))return u(i);var c=[];for(var p in Object(i))a.call(i,p)&&p!="constructor"&&c.push(p);return c}},313:function(n,e,t){var r=t(3218),u=t(5726),a=t(3498),i=Object.prototype.hasOwnProperty;n.exports=function(c){if(!r(c))return a(c);var p=u(c),v=[];for(var m in c)(m!="constructor"||!p&&i.call(c,m))&&v.push(m);return v}},1573:function(n,e,t){var r=t(2958),u=t(1499),a=t(2634);n.exports=function(i){var c=u(i);return c.length==1&&c[0][2]?a(c[0][0],c[0][1]):function(p){return p===i||r(p,i,c)}}},2545:function(n){n.exports=function(e,t){for(var r=-1,u=Array(e);++r<e;)u[r]=t(r);return u}},531:function(n,e,t){var r=t(2705),u=t(9932),a=t(1469),i=t(3448),c=r?r.prototype:void 0,p=c?c.toString:void 0;n.exports=function v(m){if(typeof m=="string")return m;if(a(m))return u(m,v)+"";if(i(m))return p?p.call(m):"";var j=m+"";return j=="0"&&1/m==-1/0?"-0":j}},1717:function(n){n.exports=function(e){return function(t){return e(t)}}},4757:function(n){n.exports=function(e,t){return e.has(t)}},1811:function(n,e,t){var r=t(1469),u=t(5403),a=t(5514),i=t(9833);n.exports=function(c,p){return r(c)?c:u(c,p)?[c]:a(i(c))}},4318:function(n,e,t){var r=t(1149);n.exports=function(u){var a=new u.constructor(u.byteLength);return new r(a).set(new r(u)),a}},4626:function(n,e,t){n=t.nmd(n);var r=t(5639),u=e&&!e.nodeType&&e,a=u&&n&&!n.nodeType&&n,i=a&&a.exports===u?r.Buffer:void 0,c=i?i.allocUnsafe:void 0;n.exports=function(p,v){if(v)return p.slice();var m=p.length,j=c?c(m):new p.constructor(m);return p.copy(j),j}},7157:function(n,e,t){var r=t(4318);n.exports=function(u,a){var i=a?r(u.buffer):u.buffer;return new u.constructor(i,u.byteOffset,u.byteLength)}},3147:function(n){var e=/\w*$/;n.exports=function(t){var r=new t.constructor(t.source,e.exec(t));return r.lastIndex=t.lastIndex,r}},419:function(n,e,t){var r=t(2705),u=r?r.prototype:void 0,a=u?u.valueOf:void 0;n.exports=function(i){return a?Object(a.call(i)):{}}},7133:function(n,e,t){var r=t(4318);n.exports=function(u,a){var i=a?r(u.buffer):u.buffer;return new u.constructor(i,u.byteOffset,u.length)}},278:function(n){n.exports=function(e,t){var r=-1,u=e.length;for(t||(t=Array(u));++r<u;)t[r]=e[r];return t}},8363:function(n,e,t){var r=t(4865),u=t(9465);n.exports=function(a,i,c,p){var v=!c;c||(c={});for(var m=-1,j=i.length;++m<j;){var x=i[m],E=p?p(c[x],a[x],x,c,a):void 0;E===void 0&&(E=a[x]),v?u(c,x,E):r(c,x,E)}return c}},8805:function(n,e,t){var r=t(8363),u=t(9551);n.exports=function(a,i){return r(a,u(a),i)}},1911:function(n,e,t){var r=t(8363),u=t(1442);n.exports=function(a,i){return r(a,u(a),i)}},4429:function(n,e,t){var r=t(5639)["__core-js_shared__"];n.exports=r},8777:function(n,e,t){var r=t(852),u=function(){try{var a=r(Object,"defineProperty");return a({},"",{}),a}catch{}}();n.exports=u},7114:function(n,e,t){var r=t(8668),u=t(2908),a=t(4757);n.exports=function(i,c,p,v,m,j){var x=1&p,E=i.length,U=c.length;if(E!=U&&!(x&&U>E))return!1;var C=j.get(i),N=j.get(c);if(C&&N)return C==c&&N==i;var R=-1,F=!0,$=2&p?new r:void 0;for(j.set(i,c),j.set(c,i);++R<E;){var P=i[R],G=c[R];if(v)var K=x?v(G,P,R,c,i,j):v(P,G,R,i,c,j);if(K!==void 0){if(K)continue;F=!1;break}if($){if(!u(c,function(L,H){if(!a($,H)&&(P===L||m(P,L,p,v,j)))return $.push(H)})){F=!1;break}}else if(P!==G&&!m(P,G,p,v,j)){F=!1;break}}return j.delete(i),j.delete(c),F}},8351:function(n,e,t){var r=t(2705),u=t(1149),a=t(7813),i=t(7114),c=t(8776),p=t(1814),v=r?r.prototype:void 0,m=v?v.valueOf:void 0;n.exports=function(j,x,E,U,C,N,R){switch(E){case"[object DataView]":if(j.byteLength!=x.byteLength||j.byteOffset!=x.byteOffset)return!1;j=j.buffer,x=x.buffer;case"[object ArrayBuffer]":return!(j.byteLength!=x.byteLength||!N(new u(j),new u(x)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+j,+x);case"[object Error]":return j.name==x.name&&j.message==x.message;case"[object RegExp]":case"[object String]":return j==x+"";case"[object Map]":var F=c;case"[object Set]":var $=1&U;if(F||(F=p),j.size!=x.size&&!$)return!1;var P=R.get(j);if(P)return P==x;U|=2,R.set(j,x);var G=i(F(j),F(x),U,C,N,R);return R.delete(j),G;case"[object Symbol]":if(m)return m.call(j)==m.call(x)}return!1}},6096:function(n,e,t){var r=t(8234),u=Object.prototype.hasOwnProperty;n.exports=function(a,i,c,p,v,m){var j=1&c,x=r(a),E=x.length;if(E!=r(i).length&&!j)return!1;for(var U=E;U--;){var C=x[U];if(!(j?C in i:u.call(i,C)))return!1}var N=m.get(a),R=m.get(i);if(N&&R)return N==i&&R==a;var F=!0;m.set(a,i),m.set(i,a);for(var $=j;++U<E;){var P=a[C=x[U]],G=i[C];if(p)var K=j?p(G,P,C,i,a,m):p(P,G,C,a,i,m);if(!(K===void 0?P===G||v(P,G,c,p,m):K)){F=!1;break}$||($=C=="constructor")}if(F&&!$){var L=a.constructor,H=i.constructor;L==H||!("constructor"in a)||!("constructor"in i)||typeof L=="function"&&L instanceof L&&typeof H=="function"&&H instanceof H||(F=!1)}return m.delete(a),m.delete(i),F}},1957:function(n,e,t){var r=typeof t.g=="object"&&t.g&&t.g.Object===Object&&t.g;n.exports=r},8234:function(n,e,t){var r=t(8866),u=t(9551),a=t(3674);n.exports=function(i){return r(i,a,u)}},6904:function(n,e,t){var r=t(8866),u=t(1442),a=t(1704);n.exports=function(i){return r(i,a,u)}},5050:function(n,e,t){var r=t(7019);n.exports=function(u,a){var i=u.__data__;return r(a)?i[typeof a=="string"?"string":"hash"]:i.map}},1499:function(n,e,t){var r=t(9162),u=t(3674);n.exports=function(a){for(var i=u(a),c=i.length;c--;){var p=i[c],v=a[p];i[c]=[p,v,r(v)]}return i}},852:function(n,e,t){var r=t(8458),u=t(7801);n.exports=function(a,i){var c=u(a,i);return r(c)?c:void 0}},5924:function(n,e,t){var r=t(5569)(Object.getPrototypeOf,Object);n.exports=r},9607:function(n,e,t){var r=t(2705),u=Object.prototype,a=u.hasOwnProperty,i=u.toString,c=r?r.toStringTag:void 0;n.exports=function(p){var v=a.call(p,c),m=p[c];try{p[c]=void 0;var j=!0}catch{}var x=i.call(p);return j&&(v?p[c]=m:delete p[c]),x}},9551:function(n,e,t){var r=t(4963),u=t(479),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,c=i?function(p){return p==null?[]:(p=Object(p),r(i(p),function(v){return a.call(p,v)}))}:u;n.exports=c},1442:function(n,e,t){var r=t(2488),u=t(5924),a=t(9551),i=t(479),c=Object.getOwnPropertySymbols?function(p){for(var v=[];p;)r(v,a(p)),p=u(p);return v}:i;n.exports=c},4160:function(n,e,t){var r=t(8552),u=t(7071),a=t(3818),i=t(8525),c=t(577),p=t(4239),v=t(346),m="[object Map]",j="[object Promise]",x="[object Set]",E="[object WeakMap]",U="[object DataView]",C=v(r),N=v(u),R=v(a),F=v(i),$=v(c),P=p;(r&&P(new r(new ArrayBuffer(1)))!=U||u&&P(new u)!=m||a&&P(a.resolve())!=j||i&&P(new i)!=x||c&&P(new c)!=E)&&(P=function(G){var K=p(G),L=K=="[object Object]"?G.constructor:void 0,H=L?v(L):"";if(H)switch(H){case C:return U;case N:return m;case R:return j;case F:return x;case $:return E}return K}),n.exports=P},7801:function(n){n.exports=function(e,t){return e==null?void 0:e[t]}},1789:function(n,e,t){var r=t(4536);n.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:function(n){n.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:function(n,e,t){var r=t(4536),u=Object.prototype.hasOwnProperty;n.exports=function(a){var i=this.__data__;if(r){var c=i[a];return c==="__lodash_hash_undefined__"?void 0:c}return u.call(i,a)?i[a]:void 0}},1327:function(n,e,t){var r=t(4536),u=Object.prototype.hasOwnProperty;n.exports=function(a){var i=this.__data__;return r?i[a]!==void 0:u.call(i,a)}},1866:function(n,e,t){var r=t(4536);n.exports=function(u,a){var i=this.__data__;return this.size+=this.has(u)?0:1,i[u]=r&&a===void 0?"__lodash_hash_undefined__":a,this}},3824:function(n){var e=Object.prototype.hasOwnProperty;n.exports=function(t){var r=t.length,u=new t.constructor(r);return r&&typeof t[0]=="string"&&e.call(t,"index")&&(u.index=t.index,u.input=t.input),u}},9148:function(n,e,t){var r=t(4318),u=t(7157),a=t(3147),i=t(419),c=t(7133);n.exports=function(p,v,m){var j=p.constructor;switch(v){case"[object ArrayBuffer]":return r(p);case"[object Boolean]":case"[object Date]":return new j(+p);case"[object DataView]":return u(p,m);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(p,m);case"[object Map]":case"[object Set]":return new j;case"[object Number]":case"[object String]":return new j(p);case"[object RegExp]":return a(p);case"[object Symbol]":return i(p)}}},8517:function(n,e,t){var r=t(3118),u=t(5924),a=t(5726);n.exports=function(i){return typeof i.constructor!="function"||a(i)?{}:r(u(i))}},5776:function(n){var e=/^(?:0|[1-9]\d*)$/;n.exports=function(t,r){var u=typeof t;return!!(r=r??9007199254740991)&&(u=="number"||u!="symbol"&&e.test(t))&&t>-1&&t%1==0&&t<r}},5403:function(n,e,t){var r=t(1469),u=t(3448),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;n.exports=function(c,p){if(r(c))return!1;var v=typeof c;return!(v!="number"&&v!="symbol"&&v!="boolean"&&c!=null&&!u(c))||i.test(c)||!a.test(c)||p!=null&&c in Object(p)}},7019:function(n){n.exports=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}},5346:function(n,e,t){var r,u=t(4429),a=(r=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";n.exports=function(i){return!!a&&a in i}},5726:function(n){var e=Object.prototype;n.exports=function(t){var r=t&&t.constructor;return t===(typeof r=="function"&&r.prototype||e)}},9162:function(n,e,t){var r=t(3218);n.exports=function(u){return u==u&&!r(u)}},7040:function(n){n.exports=function(){this.__data__=[],this.size=0}},4125:function(n,e,t){var r=t(8470),u=Array.prototype.splice;n.exports=function(a){var i=this.__data__,c=r(i,a);return!(c<0)&&(c==i.length-1?i.pop():u.call(i,c,1),--this.size,!0)}},2117:function(n,e,t){var r=t(8470);n.exports=function(u){var a=this.__data__,i=r(a,u);return i<0?void 0:a[i][1]}},7518:function(n,e,t){var r=t(8470);n.exports=function(u){return r(this.__data__,u)>-1}},4705:function(n,e,t){var r=t(8470);n.exports=function(u,a){var i=this.__data__,c=r(i,u);return c<0?(++this.size,i.push([u,a])):i[c][1]=a,this}},4785:function(n,e,t){var r=t(1989),u=t(8407),a=t(7071);n.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||u),string:new r}}},1285:function(n,e,t){var r=t(5050);n.exports=function(u){var a=r(this,u).delete(u);return this.size-=a?1:0,a}},6e3:function(n,e,t){var r=t(5050);n.exports=function(u){return r(this,u).get(u)}},9916:function(n,e,t){var r=t(5050);n.exports=function(u){return r(this,u).has(u)}},5265:function(n,e,t){var r=t(5050);n.exports=function(u,a){var i=r(this,u),c=i.size;return i.set(u,a),this.size+=i.size==c?0:1,this}},8776:function(n){n.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(u,a){r[++t]=[a,u]}),r}},2634:function(n){n.exports=function(e,t){return function(r){return r!=null&&r[e]===t&&(t!==void 0||e in Object(r))}}},4523:function(n,e,t){var r=t(8306);n.exports=function(u){var a=r(u,function(c){return i.size===500&&i.clear(),c}),i=a.cache;return a}},4536:function(n,e,t){var r=t(852)(Object,"create");n.exports=r},6916:function(n,e,t){var r=t(5569)(Object.keys,Object);n.exports=r},3498:function(n){n.exports=function(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}},1167:function(n,e,t){n=t.nmd(n);var r=t(1957),u=e&&!e.nodeType&&e,a=u&&n&&!n.nodeType&&n,i=a&&a.exports===u&&r.process,c=function(){try{var p=a&&a.require&&a.require("util").types;return p||i&&i.binding&&i.binding("util")}catch{}}();n.exports=c},2333:function(n){var e=Object.prototype.toString;n.exports=function(t){return e.call(t)}},5569:function(n){n.exports=function(e,t){return function(r){return e(t(r))}}},5639:function(n,e,t){var r=t(1957),u=typeof self=="object"&&self&&self.Object===Object&&self,a=r||u||Function("return this")();n.exports=a},619:function(n){n.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:function(n){n.exports=function(e){return this.__data__.has(e)}},1814:function(n){n.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(u){r[++t]=u}),r}},7465:function(n,e,t){var r=t(8407);n.exports=function(){this.__data__=new r,this.size=0}},3779:function(n){n.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},7599:function(n){n.exports=function(e){return this.__data__.get(e)}},4758:function(n){n.exports=function(e){return this.__data__.has(e)}},4309:function(n,e,t){var r=t(8407),u=t(7071),a=t(3369);n.exports=function(i,c){var p=this.__data__;if(p instanceof r){var v=p.__data__;if(!u||v.length<199)return v.push([i,c]),this.size=++p.size,this;p=this.__data__=new a(v)}return p.set(i,c),this.size=p.size,this}},5514:function(n,e,t){var r=t(4523),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=r(function(c){var p=[];return c.charCodeAt(0)===46&&p.push(""),c.replace(u,function(v,m,j,x){p.push(j?x.replace(a,"$1"):m||v)}),p});n.exports=i},327:function(n,e,t){var r=t(3448);n.exports=function(u){if(typeof u=="string"||r(u))return u;var a=u+"";return a=="0"&&1/u==-1/0?"-0":a}},346:function(n){var e=Function.prototype.toString;n.exports=function(t){if(t!=null){try{return e.call(t)}catch{}try{return t+""}catch{}}return""}},7813:function(n){n.exports=function(e,t){return e===t||e!=e&&t!=t}},7361:function(n,e,t){var r=t(7786);n.exports=function(u,a,i){var c=u==null?void 0:r(u,a);return c===void 0?i:c}},5694:function(n,e,t){var r=t(9454),u=t(7005),a=Object.prototype,i=a.hasOwnProperty,c=a.propertyIsEnumerable,p=r(function(){return arguments}())?r:function(v){return u(v)&&i.call(v,"callee")&&!c.call(v,"callee")};n.exports=p},1469:function(n){var e=Array.isArray;n.exports=e},8612:function(n,e,t){var r=t(3560),u=t(1780);n.exports=function(a){return a!=null&&u(a.length)&&!r(a)}},4144:function(n,e,t){n=t.nmd(n);var r=t(5639),u=t(5062),a=e&&!e.nodeType&&e,i=a&&n&&!n.nodeType&&n,c=i&&i.exports===a?r.Buffer:void 0,p=(c?c.isBuffer:void 0)||u;n.exports=p},3560:function(n,e,t){var r=t(4239),u=t(3218);n.exports=function(a){if(!u(a))return!1;var i=r(a);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"}},1780:function(n){n.exports=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991}},6688:function(n,e,t){var r=t(5588),u=t(1717),a=t(1167),i=a&&a.isMap,c=i?u(i):r;n.exports=c},3218:function(n){n.exports=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}},7005:function(n){n.exports=function(e){return e!=null&&typeof e=="object"}},2928:function(n,e,t){var r=t(9221),u=t(1717),a=t(1167),i=a&&a.isSet,c=i?u(i):r;n.exports=c},3448:function(n,e,t){var r=t(4239),u=t(7005);n.exports=function(a){return typeof a=="symbol"||u(a)&&r(a)=="[object Symbol]"}},6719:function(n,e,t){var r=t(8749),u=t(1717),a=t(1167),i=a&&a.isTypedArray,c=i?u(i):r;n.exports=c},3674:function(n,e,t){var r=t(4636),u=t(280),a=t(8612);n.exports=function(i){return a(i)?r(i):u(i)}},1704:function(n,e,t){var r=t(4636),u=t(313),a=t(8612);n.exports=function(i){return a(i)?r(i,!0):u(i)}},6410:function(n,e,t){var r=t(5990),u=t(1573);n.exports=function(a){return u(r(a,1))}},8306:function(n,e,t){var r=t(3369);function u(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError("Expected a function");var c=function(){var p=arguments,v=i?i.apply(this,p):p[0],m=c.cache;if(m.has(v))return m.get(v);var j=a.apply(this,p);return c.cache=m.set(v,j)||m,j};return c.cache=new(u.Cache||r),c}u.Cache=r,n.exports=u},479:function(n){n.exports=function(){return[]}},5062:function(n){n.exports=function(){return!1}},9833:function(n,e,t){var r=t(531);n.exports=function(u){return u==null?"":r(u)}}},q={};function S(n){var e=q[n];if(e!==void 0)return e.exports;var t=q[n]={id:n,loaded:!1,exports:{}};return w[n](t,t.exports,S),t.loaded=!0,t.exports}S.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return S.d(e,{a:e}),e},S.d=function(n,e){for(var t in e)S.o(e,t)&&!S.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},S.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),S.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},S.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},S.nmd=function(n){return n.paths=[],n.children||(n.children=[]),n};var k={};return function(){S.r(k),S.d(k,{Collection:function(){return x},FetchServer:function(){return dt},Server:function(){return H},Single:function(){return C},default:function(){return ot}});var n=S(7361),e=S.n(n),t=S(6410),r=S.n(t);function u(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function a(f,l){for(var d=0;d<l.length;d++){var o=l[d];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(f,o.key,o)}}function i(f,l,d){return l in f?Object.defineProperty(f,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):f[l]=d,f}function c(f,l){return function(d){if(Array.isArray(d))return d}(f)||function(d,o){var s=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(s!=null){var y,b,g=[],h=!0,_=!1;try{for(s=s.call(d);!(h=(y=s.next()).done)&&(g.push(y.value),!o||g.length!==o);h=!0);}catch(O){_=!0,b=O}finally{try{h||s.return==null||s.return()}finally{if(_)throw b}}return g}}(f,l)||function(d,o){if(d){if(typeof d=="string")return p(d,o);var s=Object.prototype.toString.call(d).slice(8,-1);if(s==="Object"&&d.constructor&&(s=d.constructor.name),s==="Map"||s==="Set")return Array.from(d);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return p(d,o)}}(f,l)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function p(f,l){(l==null||l>f.length)&&(l=f.length);for(var d=0,o=new Array(l);d<l;d++)o[d]=f[d];return o}function v(f){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},v(f)}var m=function(f,l){if(f.indexOf("_q")!==-1){var d=f.replace(/(_q)$/,""),o=new RegExp(l,"i");return function(A){var J;return((J=e()(A,d))===null||J===void 0?void 0:J.match(o))!==null}}if(f.indexOf("_lte")!==-1){var s=f.replace(/(_lte)$/,"");return function(A){return e()(A,s)<=l}}if(f.indexOf("_gte")!==-1){var y=f.replace(/(_gte)$/,"");return function(A){return e()(A,y)>=l}}if(f.indexOf("_lt")!==-1){var b=f.replace(/(_lt)$/,"");return function(A){return e()(A,b)<l}}if(f.indexOf("_gt")!==-1){var g=f.replace(/(_gt)$/,"");return function(A){return e()(A,g)>l}}if(f.indexOf("_neq_any")!==-1){var h=f.replace(/(_neq_any)$/,""),_=Array.isArray(l)?l:[l];return function(A){return _.every(function(J){return e()(A,h)!=J})}}if(f.indexOf("_neq")!==-1){var O=f.replace(/(_neq)$/,"");return function(A){return e()(A,O)!=l}}if(f.indexOf("_eq_any")!==-1){var z=f.replace(/(_eq_any)$/,""),D=Array.isArray(l)?l:[l];return function(A){return D.some(function(J){return e()(A,z)==J})}}if(f.indexOf("_eq")!==-1){var Z=f.replace(/(_eq)$/,"");return function(A){return e()(A,Z)==l}}if(f.indexOf("_inc_any")!==-1){var Y=f.replace(/(_inc_any)$/,""),V=Array.isArray(l)?l:[l];return function(A){return V.some(function(J){return e()(A,Y).includes(J)})}}if(f.indexOf("_inc")!==-1){var tt=f.replace(/(_inc)$/,""),Q=Array.isArray(l)?l:[l];return function(A){return Q.every(function(J){return e()(A,tt).includes(J)})}}if(f.indexOf("_ninc_any")!==-1){var X=f.replace(/(_ninc_any)$/,""),nt=Array.isArray(l)?l:[l];return function(A){return nt.every(function(J){return!e()(A,X).includes(J)})}}return Array.isArray(l)?function(A){return Array.isArray(e()(A,f))?(J=function(it){return ct=e()(A,f),ht=function(W){return W==it},ct.reduce(function(W,ut){return W||ht(ut)},!1);var ct,ht},l.reduce(function(it,ct){return it&&J(ct)},!0)):l.filter(function(it){return it==e()(A,f)}).length>0;var J}:v(l)==="object"?function(A){return r()(l)(e()(A,f))}:function(A){return Array.isArray(e()(A,f))&&typeof l=="string"?e()(A,f).indexOf(l)!==-1:typeof e()(A,f)=="boolean"&&typeof l=="string"?e()(A,f)==(l==="true"):e()(A,f)==l}};function j(f,l){if(typeof l=="function")return f.filter(l);if(l instanceof Object){var d=Object.keys(l).map(function(o){if(o==="q"){var s=new RegExp(l.q,"i");return function g(h){for(var _ in h)if(v(h[_])==="object"&&g(h[_])||h[_]&&h[_].match&&h[_].match(s)!==null)return!0;return!1}}var y=o.split("."),b=l[o];return y.length>1?function(g){var h=function(D,Z){return D.reduce(function(Y,V,tt){if(Y!=null)return Y;var Q=D.slice(0,tt+1).join("."),X=D.slice(tt+1).join("."),nt=e()(Z,Q);return Array.isArray(nt)&&tt<D.length-1?[Q,X]:void 0},void 0)}(y,g);if(h){var _=c(h,2),O=_[0],z=_[1];return j(e()(g,O),i({},z,b)).length>0}return m(o,b)(g)}:m(o,b)});return f.filter(function(o){return d.reduce(function(s,y){return s&&y(o)},!0)})}throw new Error("Unsupported filter type")}var x=function(){function f(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"id";if(u(this,f),i(this,"sequence",0),i(this,"items",[]),i(this,"server",null),i(this,"name",null),i(this,"identifierName","id"),!Array.isArray(o))throw new Error("Can't initialize a Collection with anything else than an array of items");this.identifierName=s,o.map(this.addOne.bind(this))}var l,d;return l=f,(d=[{key:"setServer",value:function(o){this.server=o}},{key:"setName",value:function(o){this.name=o}},{key:"_oneToManyEmbedder",value:function(o){var s=this;if(this.name==null)throw new Error("Can't embed references without a collection name");var y=this.name.slice(0,-1)+"_id";return function(b){if(s.server==null)throw new Error("Can't embed references without a server");var g=s.server.collections[o];if(!g)throw new Error("Can't embed a non-existing collection ".concat(o));return Array.isArray(b[o])?b[o]=g.getAll({filter:function(h){return b[o].indexOf(h[g.identifierName])!==-1}}):b[o]=g.getAll({filter:function(h){return h[y]==b[s.identifierName]}}),b}}},{key:"_manyToOneEmbedder",value:function(o){var s=this,y=o+"s",b=o+"_id";return function(g){if(s.server==null)throw new Error("Can't embed references without a server");var h=s.server.collections[y];if(!h)throw new Error("Can't embed a non-existing collection ".concat(o));try{g[o]=h.getOne(g[b])}catch{}return g}}},{key:"_itemEmbedder",value:function(o){var s=this,y=(Array.isArray(o)?o:[o]).map(function(b){return b.endsWith("s")?s._oneToManyEmbedder(b):s._manyToOneEmbedder(b)});return function(b){return y.reduce(function(g,h){return h(g)},b)}}},{key:"getCount",value:function(o){return this.getAll(o).length}},{key:"getAll",value:function(o){var s=this.items.slice(0);return o&&(o.filter&&(s=j(s,o.filter)),o.sort&&(s=function(y,b){if(typeof b=="function")return y.sort(b);if(typeof b=="string")return y.sort(function(_,O){return _[b]>O[b]?1:_[b]<O[b]?-1:0});if(Array.isArray(b)){var g=b[0],h=b[1].toLowerCase()=="asc"?1:-1;return y.sort(function(_,O){return _[g]>O[g]?h:_[g]<O[g]?-1*h:0})}throw new Error("Unsupported sort type")}(s,o.sort)),o.range&&(s=function(y,b){if(Array.isArray(b))return y.slice(b[0],b[1]!==void 0?b[1]+1:void 0);throw new Error("Unsupported range type")}(s,o.range)),s=s.map(function(y){return Object.assign({},y)}),o.embed&&this.server&&(s=s.map(this._itemEmbedder(o.embed)))),s}},{key:"getIndex",value:function(o){var s=this;return this.items.findIndex(function(y){return y[s.identifierName]==o})}},{key:"getOne",value:function(o,s){var y=this.getIndex(o);if(y===-1)throw new Error("No item with identifier ".concat(o));var b=this.items[y];return b=Object.assign({},b),s&&s.embed&&this.server&&(b=this._itemEmbedder(s.embed)(b)),b}},{key:"addOne",value:function(o){var s=o[this.identifierName];if(s!==void 0){if(this.getIndex(s)!==-1)throw new Error("An item with the identifier ".concat(s," already exists"));this.sequence=Math.max(this.sequence,s)+1}else o[this.identifierName]=this.sequence++;return this.items.push(o),Object.assign({},o)}},{key:"updateOne",value:function(o,s){var y=this.getIndex(o);if(y===-1)throw new Error("No item with identifier ".concat(o));for(var b in s)this.items[y][b]=s[b];return Object.assign({},this.items[y])}},{key:"removeOne",value:function(o){var s=this.getIndex(o);if(s===-1)throw new Error("No item with identifier ".concat(o));var y=this.items[s];return this.items.splice(s,1),o==this.sequence-1&&this.sequence--,y}}])&&a(l.prototype,d),Object.defineProperty(l,"prototype",{writable:!1}),f}();function E(f,l){for(var d=0;d<l.length;d++){var o=l[d];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(f,o.key,o)}}function U(f,l,d){return l in f?Object.defineProperty(f,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):f[l]=d,f}var C=function(){function f(o){if(function(s,y){if(!(s instanceof y))throw new TypeError("Cannot call a class as a function")}(this,f),U(this,"obj",null),U(this,"server",null),U(this,"name",null),!(o instanceof Object))throw new Error("Can't initialize a Single with anything except an object");this.obj=o}var l,d;return l=f,(d=[{key:"setServer",value:function(o){this.server=o}},{key:"setName",value:function(o){this.name=o}},{key:"_oneToManyEmbedder",value:function(o){var s=this;return function(y){if(s.server==null)throw new Error("Can't embed references without a server");var b=s.server.collections[o];if(!b)throw new Error("Can't embed a non-existing collection ".concat(o));return y[o]=b.getAll({filter:function(g){return y[o].indexOf(g[b.identifierName])!==-1}}),y}}},{key:"_manyToOneEmbedder",value:function(o){var s=this,y=o+"s",b=o+"_id";return function(g){if(s.server==null)throw new Error("Can't embed references without a server");var h=s.server.collections[y];if(!h)throw new Error("Can't embed a non-existing collection ".concat(o));try{g[o]=h.getOne(g[b])}catch{}return g}}},{key:"_itemEmbedder",value:function(o){var s=this,y=(Array.isArray(o)?o:[o]).map(function(b){return b.endsWith("s")?s._oneToManyEmbedder(b):s._manyToOneEmbedder(b)});return function(b){return y.reduce(function(g,h){return h(g)},b)}}},{key:"getOnly",value:function(o){var s=this.obj;return o&&o.embed&&this.server&&(s=Object.assign({},s),s=this._itemEmbedder(o.embed)(s)),s}},{key:"updateOnly",value:function(o){for(var s in o)this.obj[s]=o[s];return this.obj}}])&&E(l.prototype,d),Object.defineProperty(l,"prototype",{writable:!1}),f}();function N(f,l){return function(d){if(Array.isArray(d))return d}(f)||function(d,o){var s=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(s!=null){var y,b,g=[],h=!0,_=!1;try{for(s=s.call(d);!(h=(y=s.next()).done)&&(g.push(y.value),!o||g.length!==o);h=!0);}catch(O){_=!0,b=O}finally{try{h||s.return==null||s.return()}finally{if(_)throw b}}return g}}(f,l)||function(d,o){if(d){if(typeof d=="string")return R(d,o);var s=Object.prototype.toString.call(d).slice(8,-1);if(s==="Object"&&d.constructor&&(s=d.constructor.name),s==="Map"||s==="Set")return Array.from(d);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return R(d,o)}}(f,l)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function R(f,l){(l==null||l>f.length)&&(l=f.length);for(var d=0,o=new Array(l);d<l;d++)o[d]=f[d];return o}function F(f){if(!f)return{};var l={};return f.split("&").map(function(d){if(d.indexOf("=")===-1)l[d]=!0;else{var o=N(d.split("="),2),s=o[0],y=o[1];y.indexOf("[")!==0&&y.indexOf("{")!==0||(y=JSON.parse(y)),l[s.trim()]=y}}),l}function $(f,l){var d=typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(!d){if(Array.isArray(f)||(d=function(h,_){if(h){if(typeof h=="string")return P(h,_);var O=Object.prototype.toString.call(h).slice(8,-1);if(O==="Object"&&h.constructor&&(O=h.constructor.name),O==="Map"||O==="Set")return Array.from(h);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return P(h,_)}}(f))||l&&f&&typeof f.length=="number"){d&&(f=d);var o=0,s=function(){};return{s,n:function(){return o>=f.length?{done:!0}:{done:!1,value:f[o++]}},e:function(h){throw h},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,b=!0,g=!1;return{s:function(){d=d.call(f)},n:function(){var h=d.next();return b=h.done,h},e:function(h){g=!0,y=h},f:function(){try{b||d.return==null||d.return()}finally{if(g)throw y}}}}function P(f,l){(l==null||l>f.length)&&(l=f.length);for(var d=0,o=new Array(l);d<l;d++)o[d]=f[d];return o}function G(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function K(f,l){for(var d=0;d<l.length;d++){var o=l[d];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(f,o.key,o)}}function L(f,l,d){return l in f?Object.defineProperty(f,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):f[l]=d,f}var H=function(){function f(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";G(this,f),L(this,"baseUrl",null),L(this,"loggingEnabled",!1),L(this,"defaultQuery",function(){}),L(this,"batchUrl",null),L(this,"collections",{}),L(this,"singles",{}),L(this,"requestInterceptors",[]),L(this,"responseInterceptors",[]),this.baseUrl=o}var l,d;return l=f,d=[{key:"init",value:function(o){for(var s in o)Array.isArray(o[s])?this.addCollection(s,new x(o[s],"id")):this.addSingle(s,new C(o[s]))}},{key:"toggleLogging",value:function(){this.loggingEnabled=!this.loggingEnabled}},{key:"setDefaultQuery",value:function(o){this.defaultQuery=o}},{key:"setBatchUrl",value:function(o){this.batchUrl=o}},{key:"setBatch",value:function(o){console.warn("Server.setBatch() is deprecated, use Server.setBatchUrl() instead"),this.batchUrl=o}},{key:"addCollection",value:function(o,s){this.collections[o]=s,s.setServer(this),s.setName(o)}},{key:"getCollection",value:function(o){return this.collections[o]}},{key:"getCollectionNames",value:function(){return Object.keys(this.collections)}},{key:"addSingle",value:function(o,s){this.singles[o]=s,s.setServer(this),s.setName(o)}},{key:"getSingle",value:function(o){return this.singles[o]}},{key:"getSingleNames",value:function(){return Object.keys(this.singles)}},{key:"addRequestInterceptor",value:function(o){this.requestInterceptors.push(o)}},{key:"addResponseInterceptor",value:function(o){this.responseInterceptors.push(o)}},{key:"getCount",value:function(o,s){return this.collections[o].getCount(s)}},{key:"getAll",value:function(o,s){return this.collections[o].getAll(s)}},{key:"getOne",value:function(o,s,y){return this.collections[o].getOne(s,y)}},{key:"addOne",value:function(o,s){return this.collections.hasOwnProperty(o)||this.addCollection(o,new x([],"id")),this.collections[o].addOne(s)}},{key:"updateOne",value:function(o,s,y){return this.collections[o].updateOne(s,y)}},{key:"removeOne",value:function(o,s){return this.collections[o].removeOne(s)}},{key:"getOnly",value:function(o,s){return this.singles[o].getOnly()}},{key:"updateOnly",value:function(o,s){return this.singles[o].updateOnly(s)}},{key:"decode",value:function(o){if(o.queryString=decodeURIComponent(o.url.slice(o.url.indexOf("?")+1)),o.params=F(o.queryString),o.requestBody)try{o.json=JSON.parse(o.requestBody)}catch{}return this.requestInterceptors.reduce(function(s,y){return y(s)},o)}},{key:"respond",value:function(o,s,y){var b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:200;s||(s={}),s["Content-Type"]||(s["Content-Type"]="application/json");var g={status:b,headers:s,body:o};return g=this.responseInterceptors.reduce(function(h,_){return _(h,y)},g),this.log(y,g),y.respond(g.status,g.headers,JSON.stringify(g.body))}},{key:"log",value:function(o,s){this.loggingEnabled&&(console.group?(console.groupCollapsed(o.method,o.url,"(FakeRest)"),console.group("request"),console.log(o.method,o.url),console.log("headers",o.requestHeaders),console.log("body   ",o.requestBody),console.groupEnd(),console.group("response",s.status),console.log("headers",s.headers),console.log("body   ",s.body),console.groupEnd(),console.groupEnd()):(console.log("FakeRest request ",o.method,o.url,"headers",o.requestHeaders,"body",o.requestBody),console.log("FakeRest response",s.status,"headers",s.headers,"body",s.body)))}},{key:"batch",value:function(o){var s=o.json,y=this.handle.bind(this),b=Object.keys(s).reduce(function(g,h){var _,O={url:s[h],method:"GET",params:{},respond:function(z,D,Z){_={code:z,headers:Object.keys(D||{}).map(function(Y){return{name:Y,value:D[Y]}}),body:Z||{}}}};return y(O),g[h]=_||{code:404,headers:[],body:{}},g},{});return this.respond(b,{},o,200)}},{key:"handle",value:function(o){if(o=this.decode(o),this.batchUrl&&this.batchUrl===o.url&&o.method==="POST")return this.batch(o);var s,y=$(this.getSingleNames());try{for(y.s();!(s=y.n()).done;){var b=s.value;if(o.url.match(new RegExp("^"+this.baseUrl+"\\/("+b+")(\\/?.*)?$"))){if(o.method=="GET")try{var g=this.getOnly(b);return this.respond(g,null,o)}catch{return o.respond(404)}if(o.method=="PUT")try{var h=this.updateOnly(b,o.json);return this.respond(h,null,o)}catch{return o.respond(404)}if(o.method=="PATCH")try{var _=this.updateOnly(b,o.json);return this.respond(_,null,o)}catch{return o.respond(404)}}}}catch(ut){y.e(ut)}finally{y.f()}var O=o.url.match(new RegExp("^"+this.baseUrl+"\\/([^\\/?]+)(\\/(\\d+))?(\\?.*)?$"));if(O){var z=O[1],D=Object.assign({},this.defaultQuery(z),o.params);if(O[2]){if(!this.getCollection(z))return;var Z=O[3];if(o.method=="GET")try{var Y=this.getOne(z,Z,D);return this.respond(Y,null,o)}catch{return o.respond(404)}if(o.method=="PUT")try{var V=this.updateOne(z,Z,o.json);return this.respond(V,null,o)}catch{return o.respond(404)}if(o.method=="PATCH")try{var tt=this.updateOne(z,Z,o.json);return this.respond(tt,null,o)}catch{return o.respond(404)}if(o.method=="DELETE")try{var Q=this.removeOne(z,Z);return this.respond(Q,null,o)}catch{return o.respond(404)}}else{if(o.method=="GET"){if(!this.getCollection(z))return;var X,nt,A,J=this.getCount(z,D.filter?{filter:D.filter}:{});if(J>0){X=this.getAll(z,D);var it=D.range?D.range[0]:0,ct=D.range?Math.min(X.length-1+it,D.range[1]):X.length-1;nt="items ".concat(it,"-").concat(ct,"/").concat(J),A=X.length==J?200:206}else X=[],nt="items */0",A=200;return this.respond(X,{"Content-Range":nt},o,A)}if(o.method=="POST"){var ht=this.addOne(z,o.json),W=this.baseUrl+"/"+z+"/"+ht[this.getCollection(z).identifierName];return this.respond(ht,{Location:W},o,201)}}}}},{key:"getHandler",value:function(){return this.handle.bind(this)}}],d&&K(l.prototype,d),Object.defineProperty(l,"prototype",{writable:!1}),f}();function et(f){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},et(f)}function pt(f,l){var d=typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(!d){if(Array.isArray(f)||(d=function(h,_){if(h){if(typeof h=="string")return at(h,_);var O=Object.prototype.toString.call(h).slice(8,-1);if(O==="Object"&&h.constructor&&(O=h.constructor.name),O==="Map"||O==="Set")return Array.from(h);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return at(h,_)}}(f))||l&&f&&typeof f.length=="number"){d&&(f=d);var o=0,s=function(){};return{s,n:function(){return o>=f.length?{done:!0}:{done:!1,value:f[o++]}},e:function(h){throw h},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,b=!0,g=!1;return{s:function(){d=d.call(f)},n:function(){var h=d.next();return b=h.done,h},e:function(h){g=!0,y=h},f:function(){try{b||d.return==null||d.return()}finally{if(g)throw y}}}}function at(f,l){(l==null||l>f.length)&&(l=f.length);for(var d=0,o=new Array(l);d<l;d++)o[d]=f[d];return o}function M(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function ft(f,l){for(var d=0;d<l.length;d++){var o=l[d];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(f,o.key,o)}}function T(f,l){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,o){return d.__proto__=o,d},T(f,l)}function rt(f){var l=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var d,o=yt(f);if(l){var s=yt(this).constructor;d=Reflect.construct(o,arguments,s)}else d=o.apply(this,arguments);return lt(this,d)}}function lt(f,l){if(l&&(et(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(f)}function yt(f){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},yt(f)}var dt=function(f){(function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),b&&T(y,b)})(s,f);var l,d,o=rt(s);function s(){return M(this,s),o.apply(this,arguments)}return l=s,(d=[{key:"decode",value:function(y,b){var g=this,h=typeof y=="string"?new Request(y,b):y;return h.queryString=decodeURIComponent(h.url.slice(h.url.indexOf("?")+1)),h.params=F(h.queryString),h.text().then(function(_){h.requestBody=_;try{h.requestJson=JSON.parse(_)}catch{}}).then(function(){return g.requestInterceptors.reduce(function(_,O){return O(_)},h)})}},{key:"respond",value:function(y,b){return y=this.responseInterceptors.reduce(function(g,h){return h(g,b)},y),this.log(b,y),y.headers=new Headers(y.headers),y}},{key:"log",value:function(y,b){this.loggingEnabled&&(console.group?(console.groupCollapsed(y.method,y.url,"(FakeRest)"),console.group("request"),console.log(y.method,y.url),console.log("headers",y.headers),console.log("body   ",y.requestBody),console.groupEnd(),console.group("response",b.status),console.log("headers",b.headers),console.log("body   ",b.body),console.groupEnd(),console.groupEnd()):(console.log("FakeRest request ",y.method,y.url,"headers",y.headers,"body",y.requestBody),console.log("FakeRest response",b.status,"headers",b.headers,"body",b.body)))}},{key:"batch",value:function(y){throw new Error("not implemented")}},{key:"handle",value:function(y,b){var g=this;return this.decode(y,b).then(function(h){var _={headers:{"Content-Type":"application/json"},status:200};if(g.batchUrl&&g.batchUrl===h.url&&h.method==="POST")return g.batch(h);var O,z=pt(g.getSingleNames());try{for(z.s();!(O=z.n()).done;){var D=O.value;if(h.url.match(new RegExp("^"+g.baseUrl+"\\/("+D+")(\\/?.*)?$"))){if(h.method=="GET"){try{_.body=g.getOnly(D)}catch{reponse.status=404}return g.respond(_,h)}if(h.method=="PUT"){try{_.body=g.updateOnly(D,h.requestJson)}catch{reponse.status=404}return g.respond(_,h)}if(h.method=="PATCH"){try{_.body=g.updateOnly(D,h.requestJson)}catch{reponse.status=404}return g.respond(_,h)}}}}catch(W){z.e(W)}finally{z.f()}var Z,Y=pt(g.getCollectionNames());try{for(Y.s();!(Z=Y.n()).done;){var V=Z.value,tt=h.url.match(new RegExp("^"+g.baseUrl+"\\/("+V+")(\\/(\\d+))?(\\?.*)?$"));if(tt){var Q=Object.assign({},g.defaultQuery(V),h.params);if(tt[2]){var X=tt[3];if(h.method=="GET"){try{_.body=g.getOne(V,X,Q)}catch{_.status=404}return g.respond(_,h)}if(h.method=="PUT"){try{_.body=g.updateOne(V,X,h.requestJson)}catch{_.status=404}return g.respond(_,h)}if(h.method=="PATCH"){try{_.body=g.updateOne(V,X,h.requestJson)}catch{_.status=404}return g.respond(_,h)}if(h.method=="DELETE"){try{_.body=g.removeOne(V,X)}catch{_.status=404}return g.respond(_,h)}}else{if(h.method=="GET"){var nt=g.getCount(V,Q.filter?{filter:Q.filter}:{});if(nt>0){var A=g.getAll(V,Q),J=Q.range?Q.range[0]:0,it=Q.range?Math.min(A.length-1+J,Q.range[1]):A.length-1;_.body=A,_.headers["Content-Range"]="items ".concat(J,"-").concat(it,"/").concat(nt),_.status=A.length==nt?200:206}else _.body=[],_.headers["Content-Range"]="items */0";return g.respond(_,h)}if(h.method=="POST"){var ct=g.addOne(V,h.requestJson),ht=g.baseUrl+"/"+V+"/"+ct[g.getCollection(V).identifierName];return _.body=ct,_.headers.Location=ht,_.status=201,g.respond(_,h)}}}}}catch(W){Y.e(W)}finally{Y.f()}return g.respond(_,h)})}}])&&ft(l.prototype,d),Object.defineProperty(l,"prototype",{writable:!1}),s}(H),ot={Server:H,FetchServer:dt,Collection:x,Single:C}}(),k}()})})(bt);var jt=bt.exports;const xt=gt(jt);var _t=globalThis&&globalThis.__extends||function(){var B=function(I,w){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,S){q.__proto__=S}||function(q,S){for(var k in S)Object.prototype.hasOwnProperty.call(S,k)&&(q[k]=S[k])},B(I,w)};return function(I,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");B(I,w);function q(){this.constructor=I}I.prototype=w===null?Object.create(w):(q.prototype=w.prototype,new q)}}(),st=globalThis&&globalThis.__assign||function(){return st=Object.assign||function(B){for(var I,w=1,q=arguments.length;w<q;w++){I=arguments[w];for(var S in I)Object.prototype.hasOwnProperty.call(I,S)&&(B[S]=I[S])}return B},st.apply(this,arguments)};function Ot(B,I,w,q){console.group?(console.groupCollapsed(B,I,JSON.stringify(w)),console.log(q),console.groupEnd()):(console.log("FakeRest request ",B,I,w),console.log("FakeRest response",q))}const wt=function(B,I){I===void 0&&(I=!1);var w=new xt.Server;w.init(B),typeof window<"u"&&(window.restServer=w);function q(k,n,e){var t;switch(k){case"getList":{var r=e.pagination,u=r.page,a=r.perPage,i=e.sort,c=i.field,p=i.order,v={sort:[c,p],range:[(u-1)*a,u*a-1],filter:e.filter};return{data:w.getAll(n,v),total:w.getCount(n,{filter:e.filter})}}case"getOne":return{data:w.getOne(n,e.id,st({},e))};case"getMany":return{data:e.ids.map(function(x){return w.getOne(n,x)},st({},e))};case"getManyReference":{var m=e.pagination,u=m.page,a=m.perPage,j=e.sort,c=j.field,p=j.order,v={sort:[c,p],range:[(u-1)*a,u*a-1],filter:st(st({},e.filter),(t={},t[e.target]=e.id,t))};return{data:w.getAll(n,v),total:w.getCount(n,{filter:v.filter})}}case"update":return{data:w.updateOne(n,e.id,st({},e.data))};case"updateMany":return e.ids.forEach(function(x){return w.updateOne(n,x,st({},e.data))}),{data:e.ids};case"create":return{data:w.addOne(n,st({},e.data))};case"delete":return{data:w.removeOne(n,e.id)};case"deleteMany":return e.ids.forEach(function(x){return w.removeOne(n,x)}),{data:e.ids};default:return!1}}var S=function(k,n,e){var t=w.getCollection(n);if(!t&&k!=="create"){var r=new At('Undefined collection "'.concat(n,'"'));return r.code=1,Promise.reject(r)}var u;try{u=q(k,n,e)}catch(a){return console.error(a),Promise.reject(a)}return I&&Ot(k,n,e,u),Promise.resolve(u)};return{getList:function(k,n){return S("getList",k,n)},getOne:function(k,n){return S("getOne",k,n)},getMany:function(k,n){return S("getMany",k,n)},getManyReference:function(k,n){return S("getManyReference",k,n)},update:function(k,n){return S("update",k,n)},updateMany:function(k,n){return S("updateMany",k,n)},create:function(k,n){return S("create",k,n)},delete:function(k,n){return S("delete",k,n)},deleteMany:function(k,n){return S("deleteMany",k,n)}}};var At=function(B){_t(I,B);function I(){return B!==null&&B.apply(this,arguments)||this}return I}(Error);const vt=(B,I,w,q)=>(console.group?(console.groupCollapsed(B,I,JSON.stringify(w)),console.log(q),console.groupEnd()):(console.log("FakeRest request ",B,I,w),console.log("FakeRest response",q)),q),St=({getAll:B,getPage:I,isLocalesIncludes:w,isTagsActive:q},S,k)=>B(S,k).then(({data:n})=>{const{filter:e}=k;switch(S){case"pages":return e.id&&(n=n.filter(({id:t})=>t.includes(e.id))),e.title&&(n=n.filter(({title:t})=>w(t,e.title))),e.content&&(n=n.filter(({content:t})=>w(t,e.content))),e.tags&&(n=n.filter(t=>q(t,e.tags))),I(n,k);case"users":return e.id&&(n=n.filter(({id:t})=>t.includes(e.id))),e.tags&&(n=n.filter(t=>q(t,e.tags))),I(n,k);default:return!1}}),Et=({getOne:B,getAll:I,getPath:w,isTagsActive:q},{tags:{pages:{MENU:S,PUBLISHED:k},users:{PAGES_EDITOR:n}},localeProvider:{getLocale:e},authProvider:{getPermissions:t}},r)=>Promise.all([e(),t()]).then(([u,a])=>{const[i,c,p,v]=w(r);switch(i){case"pages":switch(p){case"one":return B(i,{id:v}).then(({data:m})=>{if(!(q(m,[k])||a&&a.includes(n)))return!1;const{title:j,content:x,files:E}=m;return!x||!x[u]?!1:{data:{id:v,title:j&&j[u],content:x[u],files:E&&E.map(({name:U})=>U)}}},()=>!1);case"menu":return I(i).then(({data:m})=>({data:m.filter(j=>q(j,[S])).map(({id:j,title:x})=>({id:j,title:x[u]}))}));default:return!1}default:return!1}}),Pt=B=>{const{locales:I,resProvider:w}=B,{getList:q,...S}=wt(w,!0),k={...S,getAll:(n,{sort:e={field:"id",order:"ASC"}}={})=>q(n,{pagination:{page:1,perPage:Number.MAX_VALUE},sort:e}),getPath:({path:n})=>n.split("/"),getPage:(n,{pagination:{page:e,perPage:t}})=>({data:n.slice((e-1)*t,e*t),total:n.length}),isLocalesIncludes:(n,e)=>n&&Object.keys(I).some(t=>n[t]&&n[t].toLowerCase().includes(e.toLowerCase())),isTagsActive:({tags:n},e)=>n&&n.some(({name:t,start:r,end:u})=>e.includes(t)&&(!r||new Date>new Date(r))&&(!u||new Date<new Date(u)))};return{...k,getList:(n,e)=>St(k,n,e).then(t=>t&&vt("getList",n,e,t)).then(t=>t||q(n,e)),exchange:n=>Et(k,B,n).then(e=>vt("exchange",void 0,n,e)),log:vt}};export{Pt as default};
