const v="locale",p=e=>localStorage.setItem(v,e),g=e=>localStorage.getItem(v)||Object.keys(e)[0],w=(e,t)=>e(t).then(r=>r.default),y=({i18n:e,locales:t})=>({setLocale:r=>Promise.resolve(r).then(p),getLocale:()=>Promise.resolve().then(()=>g(t)),getMessages:()=>Promise.resolve().then(()=>g(t)).then(r=>w(e,r))}),I=({parents:e,id:t})=>((e?e.join("/")+"/":"")+t).replace(/\./g,"/"),b=({basename:e=""}={})=>{const t=(r,o,n)=>`${e}/static/${r}/${o}/${I(n)}`;return{originByData:(r,o)=>t("origin",r,o),pathByData:t}};function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidCharacterError";var d=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,n=0,s=0,h="";o=t.charAt(s++);~o&&(r=n%4?64*r+o:o,n++%4)?h+=String.fromCharCode(255&r>>(-2*n&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return h};function P(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(d(r).replace(/(.)/g,function(o,n){var s=n.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(t)}catch{return d(t)}}function a(e){this.message=e}function k(e,t){if(typeof e!="string")throw new a("Invalid token specified");var r=(t=t||{}).header===!0?0:1;try{return JSON.parse(P(e.split(".")[r]))}catch(o){throw new a("Invalid token specified: "+o.message)}}a.prototype=new Error,a.prototype.name="InvalidTokenError";const l="token",m=e=>localStorage.setItem(l,e),c=()=>localStorage.getItem(l),u=()=>localStorage.removeItem(l),f=()=>{const e=c();return e?k(e):{}},S=()=>({login:({username:e,password:t})=>{const o={Authorization:`Basic ${btoa(`${e}:${t}`)}`};return fetch("/login",{headers:o}).then(n=>{if(n.status<200||n.status>=300)throw new Error(n.statusText);return n.text()}).then(m)},logout:e=>Promise.resolve().then(u).then(()=>{if(typeof e=="string")return e}),checkError:({status:e})=>Promise.resolve().then(()=>{if(e===401||e===403)return u(),Promise.reject()}),checkAuth:()=>c()?Promise.resolve():Promise.reject(),getPermissions:()=>Promise.resolve().then(f).then(({roles:e})=>e),getUserId:()=>Promise.resolve().then(f).then(({sub:e})=>e),setToken:e=>Promise.resolve(e).then(m),getToken:()=>Promise.resolve().then(c)});export{b as a,S as b,y as g};
