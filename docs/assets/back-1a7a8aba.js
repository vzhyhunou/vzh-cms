import{q as m,f as b}from"./index-486c9f54.js";const r="/api",P=(u,{getLocale:f},{getToken:c})=>{const i=(t,d={})=>Promise.all([f(),c()]).then(([a,e])=>({...d,headers:new Headers({Accept:"application/json","Accept-Language":a}),...e?{user:{authenticated:!0,token:`Bearer ${e}`}}:{}})).then(a=>b(t,a));return{getList:(t,{pagination:d,sort:a,filter:e,options:n})=>{const{page:o,perPage:h}=d,{field:$,order:g}=a,l={page:o-1,size:h,sort:`${$},${g}`,...e};return i(`${r}/${t}/search/list?${m.stringify(l)}`,n).then(({json:s})=>({data:s._embedded?s._embedded[t]:[],total:s.page.totalElements}))},getOne:(t,{id:d,options:a})=>i(`${r}/${t}/${d}`,a).then(({json:e})=>({data:e})),getMany:(t,{ids:d,options:a})=>i(`${r}/${t}/search/findByIdIn?${m.stringify({ids:d})}`,a).then(({json:e})=>({data:e._embedded?e._embedded[t]:[]})),getManyReference:(t,{pagination:d,sort:a,filter:e,target:n,id:o,options:h})=>{const{page:$,perPage:g}=d,{field:l,order:s}=a,p={sort:JSON.stringify([l,s]),range:JSON.stringify([($-1)*g,$*g-1]),filter:JSON.stringify({...e,[n]:o})};return i(`${r}/${t}?${m.stringify(p)}`,h).then(({json:y})=>({data:y._embedded?y._embedded[t]:[],total:y.page.totalElements}))},update:(t,{id:d,data:a,options:e})=>i(`${r}/${t}/${d}`,{method:"PUT",body:JSON.stringify(a),...e}).then(({json:n})=>({data:n})),updateMany:(t,{data:d,options:a})=>Promise.all(d.map(e=>i(`${r}/${t}/${e.id}`,{method:"PATCH",body:JSON.stringify(e),...a}))).then(e=>({data:e.map(n=>n.json)})),create:(t,{data:d,options:a})=>i(`${r}/${t}`,{method:"POST",body:JSON.stringify(d),...a}).then(({json:e})=>({data:{...d,id:e.id}})),delete:(t,{id:d,options:a})=>i(`${r}/${t}/${d}`,{method:"DELETE",...a}).then(({json:e})=>({data:e})),deleteMany:(t,{ids:d,options:a})=>Promise.all(d.map(e=>i(`${r}/${t}/${e}`,{method:"DELETE",...a}))).then(e=>({data:e.map(n=>n.json)})),exchange:({path:t,query:d,data:a,options:e})=>i((t.startsWith("/")?t:`${r}/${t}`)+(d?`?${m.stringify(d)}`:""),a?{body:JSON.stringify(a),...e}:e).then(({json:n})=>({data:n&&n._embedded?n._embedded[t.split("/")[0]]:n}))}};export{P as default};
