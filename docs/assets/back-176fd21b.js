import{q as l,f as y,_ as v,a as _}from"./index-ee745b51.js";import{g as b,a as p,b as E}from"./back-b67b2a39.js";const n="/api",O=({localeProvider:{getLocale:o},authProvider:{getToken:s}})=>{const i=(e,a={})=>Promise.all([o(),s()]).then(([r,t])=>({...a,headers:new Headers({Accept:"application/json","Accept-Language":r}),...t?{user:{authenticated:!0,token:`Bearer ${t}`}}:{}})).then(r=>y(e,r));return{getList:(e,{pagination:a,sort:r,filter:t,options:d})=>{const{page:m,perPage:P}=a,{field:c,order:$}=r,h={page:m-1,size:P,sort:`${c},${$}`,...t};return i(`${n}/${e}/search/list?${l.stringify(h)}`,d).then(({json:g})=>({data:g._embedded?g._embedded[e]:[],total:g.page.totalElements}))},getOne:(e,{id:a,options:r})=>i(`${n}/${e}/${a}`,r).then(({json:t})=>({data:t})),getMany:(e,{ids:a,options:r})=>i(`${n}/${e}/search/findByIdIn?${l.stringify({ids:a})}`,r).then(({json:t})=>({data:t._embedded?t._embedded[e]:[]})),getManyReference:(e,{pagination:a,sort:r,filter:t,target:d,id:m,options:P})=>{const{page:c,perPage:$}=a,{field:h,order:g}=r,f={sort:JSON.stringify([h,g]),range:JSON.stringify([(c-1)*$,c*$-1]),filter:JSON.stringify({...t,[d]:m})};return i(`${n}/${e}?${l.stringify(f)}`,P).then(({json:u})=>({data:u._embedded?u._embedded[e]:[],total:u.page.totalElements}))},update:(e,{id:a,data:r,options:t})=>i(`${n}/${e}/${a}`,{method:"PUT",body:JSON.stringify(r),...t}).then(({json:d})=>({data:d})),updateMany:(e,{data:a,options:r})=>Promise.all(a.map(({id:t,...d})=>i(`${n}/${e}/${t}`,{method:"PATCH",body:JSON.stringify(d),...r}))).then(t=>({data:t.map(d=>d.json)})),create:(e,{data:a,options:r})=>i(`${n}/${e}`,{method:"POST",body:JSON.stringify(a),...r}).then(({json:t})=>({data:{...a,id:t.id}})),delete:(e,{id:a,options:r})=>i(`${n}/${e}/${a}`,{method:"DELETE",...r}).then(({json:t})=>({data:t})),deleteMany:(e,{ids:a,options:r})=>Promise.all(a.map(t=>i(`${n}/${e}/${t}`,{method:"DELETE",...r}))).then(t=>({data:t.map(d=>d.json)})),exchange:({path:e,query:a,data:r,options:t})=>i((e.startsWith("/")?e:`${n}/${e}`)+(a?`?${l.stringify(a)}`:""),r?{body:JSON.stringify(r),...t}:t).then(({json:d})=>({data:d&&d._embedded?d._embedded[e.split("/")[0]]:d}))}},L={getLocaleProvider:b,getFuncProvider:p,getAuthProvider:E,getDataProvider:O},S=o=>v(Object.assign({"./messages/en.js":()=>_(()=>import("./en-11063c36.js"),["assets/en-11063c36.js","assets/index-ee745b51.js"]),"./messages/ru.js":()=>_(()=>import("./ru-8654b378.js"),[])}),`./messages/${o}.js`).then(s=>s.default),{getLocaleProvider:A,getFuncProvider:D,getAuthProvider:J,getDataProvider:N}=L,M=o=>{const s=A({getLocaleMessages:S,...o}),i=D(o),e=J(o),a=N({localeProvider:s,authProvider:e,...o});return{localeProvider:s,funcProvider:i,authProvider:e,dataProvider:a}};export{M as default};
